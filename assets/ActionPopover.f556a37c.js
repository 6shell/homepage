import{i as E,r as s,o as X,b as Y,M as A,z as D,v as w,x as L,ad as V,ae as M,q as N,e as f,f as O,L as q,G as B,B as G,D as U}from"./vendor.81fc964e.js";import{g as P}from"./direction.8b21c0ae.js";import{_ as j}from"./index.4b5728d4.js";const F=E({props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0}},emits:["opend","closed"],setup(m,{expose:S,emit:h}){const T=m,t=s(!1),i=s(!1),p=s(""),_=s();X(()=>{document.addEventListener("click",g)}),Y(()=>{document.removeEventListener("click",g)});const g=e=>{!T.closeOnClickOutside||t.value&&!_.value.contains(e.target)&&(t.value=!1)},a=s({width:200,height:200,top:0,left:0}),C=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:n}=e,{actionType:d,actionClickType:l,actionClickValue:c}=n;if(d===1&&l===1){const{w:r,h:u,direction:k}=c,[y,x,b,z]=P(o,{width:r||200,height:u||200},k);a.value={width:r||200,height:u||200,left:y,top:x},p.value=`${b-y}px ${z-x}px`,t.value=!0,i.value=k===0}})},v=()=>{t.value=!1,i.value=!1},I=(e,o)=>{t.value?v():C(e,o)},$=({w:e,h:o,direction:n},d)=>{setTimeout(()=>{const[l,c,r,u]=P(d,{width:e||200,height:o||200},n);a.value={width:e||200,height:o||200,left:l,top:c},p.value=`${r-l}px ${u-c}px`,t.value=!0,i.value=n===0})};return A(()=>t.value,e=>{h(e?"opend":"closed")}),S({open:C,close:v,toggle:I,defaultOpen:$}),(e,o)=>{const n=N("Icon");return f(),D(M,{to:"body"},[w(V,{name:"zoomIn"},{default:L(()=>[t.value?(f(),O("div",{key:0,ref_key:"actionPopover",ref:_,class:G(["action-popover",m.popoverCustomClass]),style:U({width:a.value.width+"px",height:a.value.height+"px",top:a.value.top+"px",left:a.value.left+"px",transformOrigin:p.value})},[q(e.$slots,"default",{},void 0,!0),i.value?(f(),O("div",{key:0,class:"close",onClick:v},[w(n,{name:"close"})])):B("",!0)],6)):B("",!0)]),_:3})])}}});var Q=j(F,[["__scopeId","data-v-8065b1ea"]]);export{Q as default};
