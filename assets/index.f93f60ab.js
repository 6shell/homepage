var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,i=(e,i)=>{for(var s in i||(i={}))t.call(i,s)&&o(e,s,i[s]);if(a)for(var s of a(i))n.call(i,s)&&o(e,s,i[s]);return e};import{m as s}from"./index.335d7c87.js";import{a as r}from"./global.69472560.js";import{d as c,f as l,e as d,w as p,p as u,h as m,o as w,j as h,s as v,t as f,u as g}from"./element-plus.d6b83795.js";function y(e){return e.includes("风")?["龙卷风","狂爆风","飓风","热带风暴"].includes(e)?"龙卷风":"风":e.includes("霾")||e.includes("雾")?["重","大","浓","沙","尘"].some((t=>e.includes(t)))?"大雾":"小雾":e.includes("雨")?e.includes("雷")?"雷阵雨":e.includes("雪")?"雨夹雪":e.includes("大")||e.includes("暴")?"大雨":"小雨":e.includes("雪")?"雪":e}const S={"晴":"clear-day","少云":"cloudy","晴间多云":"overcast-day","多云":"overcast","阴":"overcast","平静":"overcast","风":"wind","龙卷风":"hurricane","大雾":"fog","小雾":"mist","雷阵雨":"thunderstorms-rain","大雨":"rain","小雨":"drizzle","雨夹雪":"sleet","雪":"snow","热":"high","冷":"low","未知":"new-moon"};var b=c({name:"Weather",props:{componentSetting:{type:Object,required:!0}},setup(e){const t=l((()=>s(e.componentSetting.position))),a=d(""),n=d(""),o=d("https://cdn.jsdelivr.net/gh/leon-kfd/weather-icons/production/line/all/clear-day.svg"),i=d("24"),c=d("未知"),u=async()=>{const e=await fetch(`${r}/tapi/amap/v3/weather/weatherInfo?extensions=base&city=${n.value}`),{status:t,lives:a}=await e.json();if("1"===t){const{weather:e,temperature:t}=a[0];o.value=function(e){const t=y(e)||"未知";return`https://cdn.jsdelivr.net/gh/leon-kfd/weather-icons/production/line/all/${S[t]||"new-moon"}.svg`}(e),c.value=y(e),i.value=t}};return p((()=>[e.componentSetting.weatherMode,e.componentSetting.cityName]),(async()=>{if(1===e.componentSetting.weatherMode){const e=await fetch(`${r}/tapi/amap/v3/ip`),{status:t,adcode:o,city:i}=await e.json();"1"===t&&(a.value=i.replace(/[市城区]/g,""),n.value=o)}else{const t=await fetch(`${r}/tapi/amap/v3/config/district?keywords=${e.componentSetting.cityName}&subdistrict=0`),{status:o,districts:i}=await t.json();if("1"===o&&i.length>0){const e=i.find((e=>"city"===e.level)),{adcode:t,name:o}=e;a.value=o.replace(/[市城区]/g,""),n.value=t}}u()}),{immediate:!0}),{positionCSS:t,cityName:a,adcode:n,weatherIcon:o,weatherText:c,temperature:i}}});const j=g();u("data-v-0a71599a");const x={class:"weather-box"},O={class:"weather-icon-wrapper"},$={class:"weather-text-wrapper"},I={class:"temperature"},z={class:"city"};m();const N=j(((e,t,a,n,o,s)=>(w(),h("div",{class:"wrapper",style:i({fontSize:e.componentSetting.baseFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily},e.positionCSS)},[v("div",x,[v("div",O,[v("img",{src:e.weatherIcon,style:{filter:`drop-shadow(${e.componentSetting.iconShadow})`},alt:"weather icon"},null,12,["src"])]),v("div",$,[v("div",I,f(e.temperature)+"°",1),v("div",z,f(e.cityName)+" | "+f(e.weatherText),1)])])],4))));b.render=N,b.__scopeId="data-v-0a71599a";export default b;
