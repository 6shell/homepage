var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,a=(t,a)=>{for(var s in a||(a={}))n.call(a,s)&&i(t,s,a[s]);if(e)for(var s of e(a))o.call(a,s)&&i(t,s,a[s]);return t};import{_ as s,d as c,u as l,N as r,r as p,H as d,I as m,C as g,l as u,g as y,p as v,y as w,F as h,n as S,D as b,A as f,B as k,O as x,o as O,x as j,W as I}from"./index.b595840a.js";const _={class:"weibo"},A=(t=>(f("data-v-1d6b49c2"),t=t(),k(),t))((()=>y("div",{class:"logo-text"},"微博热搜",-1))),F={key:1,class:"loading"},T={key:2,class:"error"},C={key:3,class:"list"},L={class:"num",style:{width:"24px",height:"24px"}},P=["src"],$={class:"title"},z=["href"],W={key:0,class:"count"},q={class:"icon",style:{width:"24px",height:"24px"}},B=["src"];var D=s(c({props:{componentSetting:{type:Object,required:!0}},setup(t){const e=t,n=l(),o=r((()=>n.state.isLock)),i=p([]),s=p(!1),c=p(!1),f=async()=>{try{s.value=!0,c.value=!1;const t=await fetch(`${I}/api/weiboList?limit=${e.componentSetting.limit||10}`),{list:n}=await t.json();i.value=n.map((t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)})))}catch(t){c.value=!0,console.error(t)}finally{s.value=!1}};let k;function D(){f(),k&&window.clearInterval(k),k=window.setInterval((()=>{f()}),60*e.componentSetting.duration*1e3)}d((()=>D())),m((()=>window.clearInterval(k))),g((()=>[e.componentSetting.duration,e.componentSetting.limit]),(()=>D()));const E=r((()=>x(e.componentSetting.position))),H=()=>{1===e.componentSetting.clickActionType?D():2===e.componentSetting.clickActionType&&window.open("https://weibo.com/")};return(e,n)=>(O(),u("div",{class:"wrapper",style:v(a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},b(E)))},[y("div",_,[!1!==t.componentSetting.showTitle?(O(),u("div",{key:0,class:"logo",style:v({cursor:t.componentSetting.clickActionType?"pointer":"default"}),onClick:H},[y("img",{src:"https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",alt:"Weibo",style:v({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},null,4),A],4)):w("",!0),s.value?(O(),u("div",F,"Loading...")):c.value?(O(),u("div",T,"Something error!")):(O(),u("div",C,[(O(!0),u(h,null,S(i.value,(t=>(O(),u("div",{class:"list-item",key:t.id},[y("div",L,[t.num?(O(),u("img",{key:0,src:t.num,style:{width:"100%",height:"100%"}},null,8,P)):w("",!0)]),y("div",$,[y("a",{href:t.link,target:"_blank",style:v(b(o)?"":"pointer-events: none")},j(t.title),13,z)]),t.count?(O(),u("div",W,j(t.count)+"w",1)):w("",!0),y("div",q,[t.icon?(O(),u("img",{key:0,src:t.icon,style:{width:"100%",height:"100%"}},null,8,B)):w("",!0)])])))),128))]))])],4))}}),[["__scopeId","data-v-1d6b49c2"]]);export{D as default};
