import{_ as a,d as e,r as l,C as t,b as s,l as i,g as r,h as n,w as u,m as c,D as o,F as v,f as p,o as d,L as m,U as h,X as g,n as b,y,x as k,W as f}from"./index.b595840a.js";const w={key:0,class:"wrapper"},C={class:"tab-title-wrapper"},x={class:"tab-container"},j={key:0,class:"text"},$={key:1,class:"text"},z={key:2,class:"item-wrapper"},_=["onClick"],A={class:"img-wrapper"},L=["src"],I={class:"tab-container"},S={key:0,class:"text"},E={key:1,class:"text"},H={key:2,class:"item-wrapper"},O=["onClick"],D={class:"img-wrapper"},N=["src"],U={class:"sub-tab-container"},P=["onClick"],R={class:"tab-container"},W={class:"item-wrapper"},q=["onClick"],B={class:"img-wrapper"},M=["src"],F={class:"load-more"},G=["loading"];var K=a(e({emits:["submit"],setup(a,{emit:e}){const K=l(!1),T=l(),X=l(1),J=l(!1),Q=l(!1),V=l([]),Y=l([]),Z=l([]),aa=l(1),ea=[{label:"风景",value:9},{label:"4K",value:36},{label:"清新",value:15},{label:"萌宠",value:14},{label:"游戏",value:5},{label:"汽车",value:12},{label:"时尚",value:10},{label:"体育",value:16}],la=l(9),ta=async(a=!1)=>{a&&(Z.value=[],aa.value=1);try{J.value=!0,Q.value=!1;const a=await fetch(`${f}/api/360img?cid=${la.value}&page=${aa.value}&pageSize=18`),{errno:e,data:l}=await a.json();if(0!==e)throw new Error("Api server error");Z.value=[...Z.value,...l.list.map((a=>({url:a.url.replace("http","https"),thumb:`${a.url.replace("http","https")}?x-oss-process=image/resize,w_300/quality,q_90`})))]}catch(e){Q.value=!0,console.error(e)}finally{J.value=!1}},sa=()=>{T.value.open(),K.value||(K.value=!0)};t((()=>[K.value,X.value,la.value]),(()=>{1===X.value?V.value&&0!==V.value.length||(async()=>{try{J.value=!0,Q.value=!1;const a=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN"),e=await fetch(`${f}/api/transfer?target=${a}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:l}=await e.json(),t=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=8&n=8&mkt=zh-CN"),s=await fetch(`${f}/api/transfer?target=${t}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:i}=await s.json();i.shift();const r=[...l,...i];V.value=r.map((a=>({url:`https://cn.bing.com/${a.url}`,thumb:`https://cn.bing.com/${a.urlbase}_320x240.jpg&rf=LaDigue_1920x1080.jpg&pid=hp`})))}catch(a){Q.value=!0,console.error(a)}finally{J.value=!1}})():2===X.value?Y.value&&0!==Y.value.length||(async()=>{try{J.value=!0,Q.value=!1;const a=await fetch(`${f}/photos?pageSize=18`),{errCode:e,data:l}=await a.json();if(200!==e)throw new Error("Api server error");Y.value=l.list.map((a=>({url:a.urls.raw,thumb:a.urls.thumb})))}catch(a){Q.value=!0,console.error(a)}finally{J.value=!1}})():3===X.value&&ta(!0)}));const ia=()=>{aa.value++,ta()},ra=()=>{},na=a=>{e("submit",a),T.value.close()},ua=s(!0);return(a,e)=>{const l=p("animation-dialog");return d(),i(v,null,[r("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:sa},"今日壁纸推荐"),n(l,c({ref_key:"dialog",ref:T,animationMode:"",title:"今日壁纸推荐",width:"min(760px, 94vw)",height:"min(520px, 80vh)",appendToBody:"",closeOnClickOutside:!1,listenWindowSizeChange:!0,onBeforeClose:ra},o(ua),{customWrapperClass:"recommend-picture"}),{default:u((()=>[K.value?(d(),i("div",w,[r("div",C,[r("div",{class:m(["title",1===X.value&&"active"]),onClick:e[0]||(e[0]=a=>X.value=1)},"必应壁纸",2),r("div",{class:m(["title",3===X.value&&"active"]),onClick:e[1]||(e[1]=a=>X.value=3)},"360壁纸",2),r("div",{class:m(["title",2===X.value&&"active"]),onClick:e[2]||(e[2]=a=>X.value=2)},"UNSPLAH",2)]),h(r("div",x,[J.value?(d(),i("div",j,"Loading...")):Q.value?(d(),i("div",$,"Something Error...")):(d(),i("div",z,[(d(!0),i(v,null,b(V.value,(a=>(d(),i("div",{class:"item",key:a.url,onClick:e=>na(a.url)},[r("div",A,[a.url?(d(),i("img",{key:0,src:a.thumb,loading:"lazy"},null,8,L)):y("",!0)])],8,_)))),128)),(d(),i(v,null,b(4,(a=>r("div",{class:"item-fake",key:a}))),64))]))],512),[[g,1===X.value]]),h(r("div",I,[J.value?(d(),i("div",S,"Loading...")):Q.value?(d(),i("div",E,"Something Error...")):(d(),i("div",H,[(d(!0),i(v,null,b(Y.value,(a=>(d(),i("div",{class:"item",key:a.url,onClick:e=>na(a.url)},[r("div",D,[a.url?(d(),i("img",{key:0,src:a.thumb,loading:"lazy"},null,8,N)):y("",!0)])],8,O)))),128)),(d(),i(v,null,b(4,(a=>r("div",{class:"item-fake",key:a}))),64))]))],512),[[g,2===X.value]]),h(r("div",U,[(d(),i(v,null,b(ea,(a=>r("div",{class:m(["sub-tab-title",la.value===a.value&&"active"]),key:a.value,onClick:e=>la.value=a.value},k(a.label),11,P))),64))],512),[[g,3===X.value]]),h(r("div",R,[r("div",W,[(d(!0),i(v,null,b(Z.value,(a=>(d(),i("div",{class:"item",key:a.url,onClick:e=>na(a.url)},[r("div",B,[a.url?(d(),i("img",{key:0,src:a.thumb,loading:"lazy"},null,8,M)):y("",!0)])],8,q)))),128)),(d(),i(v,null,b(4,(a=>r("div",{class:"item-fake",key:a}))),64))]),r("div",F,[r("button",{class:"btn btn-warning",loading:J.value,onClick:ia},k(J.value?"LOADING...":"LOAD MORE"),9,G)])],512),[[g,3===X.value]])])):y("",!0)])),_:1},16)],64)}}}),[["__scopeId","data-v-50d19a1f"]]);export{K as default};
