var L=Object.defineProperty;var S=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var _=(t,e,n)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y=(t,e)=>{for(var n in e||(e={}))F.call(e,n)&&_(t,n,e[n]);if(S)for(var n of S(e))E.call(e,n)&&_(t,n,e[n]);return t};import{_ as T,u as z,m as B,f as D}from"./index.3f70ec74.js";import{h as $,i as w,r as g,o as j,a as N,K as U,e as i,g as c,A as r,D as d,F as V,v as q,u as k,p as K,f as M,b as s,E as x}from"./vendor.0ec422ce.js";const O=t=>(K("data-v-1c9fb5f7"),t=t(),M(),t),P={class:"weibo"},R=O(()=>c("div",{class:"logo-text"},"\u5FAE\u535A\u70ED\u641C",-1)),W={key:1,class:"loading"},G={key:2,class:"error"},H={key:3,class:"list"},J={class:"num",style:{width:"24px",height:"24px"}},Q=["src"],X={class:"title"},Y=["href"],Z={key:0,class:"count"},tt={class:"icon",style:{width:"24px",height:"24px"}},et=["src"],ot=$({props:{componentSetting:{type:Object,required:!0}},setup(t){const e=t,n=z(),b=w(()=>n.isLock),A="https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",m=g([]),u=g(!1),p=g(!1),f=async()=>{try{u.value=!0,p.value=!1;const l=await fetch(`${D}/api/weiboList?limit=${e.componentSetting.limit||10}`),{list:v}=await l.json();m.value=v.map(o=>({num:o.pic,id:o.desc,title:o.desc,icon:o.icon,link:o.scheme,count:~~(o.desc_extr/1e4)}))}catch(l){p.value=!0,console.error(l)}finally{u.value=!1}};let a;function h(){f(),a&&window.clearInterval(a),a=window.setInterval(()=>{f()},e.componentSetting.duration*60*1e3)}j(()=>h()),N(()=>window.clearInterval(a)),U(()=>[e.componentSetting.duration,e.componentSetting.limit],()=>h());const C=w(()=>B(e.componentSetting.position)),I=()=>{e.componentSetting.clickActionType===1?h():e.componentSetting.clickActionType===2&&window.open("https://weibo.com/")};return(l,v)=>(s(),i("div",{class:"wrapper",style:r(y({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},k(C)))},[c("div",P,[t.componentSetting.showTitle!==!1?(s(),i("div",{key:0,class:"logo",style:r({cursor:t.componentSetting.clickActionType?"pointer":"default"}),onClick:I},[c("img",{src:A,alt:"Weibo",style:r({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},null,4),R],4)):d("",!0),u.value?(s(),i("div",W,"Loading...")):p.value?(s(),i("div",G,"Something error!")):(s(),i("div",H,[(s(!0),i(V,null,q(m.value,o=>(s(),i("div",{class:"list-item",key:o.id},[c("div",J,[o.num?(s(),i("img",{key:0,src:o.num,style:{width:"100%",height:"100%"}},null,8,Q)):d("",!0)]),c("div",X,[c("a",{href:o.link,target:"_blank",style:r(k(b)?"":"pointer-events: none")},x(o.title),13,Y)]),o.count?(s(),i("div",Z,x(o.count)+"w",1)):d("",!0),c("div",tt,[o.icon?(s(),i("img",{key:0,src:o.icon,style:{width:"100%",height:"100%"}},null,8,et)):d("",!0)])]))),128))]))])],4))}});var ct=T(ot,[["__scopeId","data-v-1c9fb5f7"]]);export{ct as default};
