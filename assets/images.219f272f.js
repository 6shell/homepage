import{R as e}from"./index.a8eea93e.js";function t(e){return new Promise(((t,n)=>{(function(e,t="image/png",a,n){return new Promise(((o,r)=>{const s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",n&&(s.timeout=n),s.onload=()=>{if(200===s.status){const e=new Uint8Array(s.response);let a=e.length;const n=new Array(a);for(;a--;)n[a]=String.fromCharCode(e[a]);const r=n.join(""),i=window.btoa(r);o("data:"+(t||"image/png")+";base64,"+i)}},s.onerror=e=>{r(e)},s.onprogress=e=>{a&&a(e)},n&&(s.ontimeout=e=>{s.abort(),r(e)}),s.send()}))})(a(e,"source"),"image/x-icon",null,5e3).then((e=>{const a=new Image;a.src=e,a.onload=()=>{const e=document.createElement("canvas"),n=e.getContext("2d"),o=a.width>32?32:a.width,r=a.height>32?32:a.height;e.width=o,e.height=r,n.drawImage(a,0,0,o,r);const s=n.getImageData(0,0,o,r),[i,d,c,g]=[255,255,255,255];for(let t=0;t<s.data.length;t+=4){const e=s.data[t],a=s.data[t+1],n=s.data[t+2],o=s.data[t+3];Math.sqrt((e-i)**2+(a-d)**2+(n-c)**2+(o-g)**2)<=0&&(s.data[t]=0,s.data[t+1]=0,s.data[t+2]=0,s.data[t+3]=0)}n.putImageData(s,0,0);const m=e.toDataURL("image/png");t(m)},a.onerror=e=>{n(e)}}),(e=>{n(e)}))}))}function a(t,a="redirect",n=!1){let o=`${e}/api/icon?url=${encodeURIComponent(t.replace(/http(s)?:\/\//,""))}`;return"source"===a?o+="&type=source":"link"===a&&(o+="&type=link"),n&&(o+="&disabledCache=1"),o}export{t as a,a as g};
