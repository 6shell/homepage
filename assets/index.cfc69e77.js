import{G as e,_ as t,r as a,w as n,c as o,o as i,a as l,g as s,t as c,F as d,q as r,s as u,n as h,x as m,y as p,d as v,u as k,f as g,A as f,H as S,i as C,k as y,I as D,p as w,h as M}from"./index.f26a186a.js";import{d as b}from"./dayjs.min.9d3883da.js";import{l as Y,g as x}from"./color.556e4bcb.js";var O,_,A={exports:{}},E=A.exports=(O="week",_="year",function(e,t,a){var n=t.prototype;n.week=function(e){if(void 0===e&&(e=null),null!==e)return this.add(7*(e-this.week()),"day");var t=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var n=a(this).startOf(_).add(1,_).date(t),o=a(this).endOf(O);if(n.isBefore(o))return 1}var i=a(this).startOf(_).date(t).startOf(O).subtract(1,"millisecond"),l=this.diff(i,O,!0);return l<0?a(this).startOf("week").week():Math.ceil(l)},n.weeks=function(e){return void 0===e&&(e=null),this.week(e)}});b.extend(E);const L={name:"DatePicker",props:{date:String,todo:{type:Object,required:!0},isDark:{type:Boolean,default:!1}},emit:["selectDate"],setup(e,{emit:t}){const i=a("");n((()=>e.date),(e=>{i.value=b(e).format("YYYY-MM")}),{immediate:!0});return{weekStrArr:["S","M","T","W","T","F","S"],dayList:o((()=>{const e=b().month(b(i.value).month()).startOf("month");let t=b().week(b(e).week()).startOf("week");const a=[];for(let n=0;n<35;n++){const e=~~t.format("DD"),n=t.format("YYYY-MM-DD"),o=~~t.format("MM");a.push({label:e,value:n,month:o}),t=t.add(1,"d")}return a})),selectedMonth:o((()=>~~b(i.value).format("MM"))),labelMonth:o((()=>b(i.value).format("MMM, YYYY"))),hasTodoListDates:o((()=>Object.keys(e.todo))),handleClickDay:e=>t("selectDate",e),handlePrevClick:()=>{i.value=b(i.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{i.value=b(i.value).add(1,"month").format("YYYY-MM")}}}},P=e=>(m("data-v-644ae154"),e=e(),p(),e),N={class:"calendar__date"},T=[P((()=>s("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[s("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)))],B={class:"calendar__head content"},j=[P((()=>s("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[s("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)))],z=["onClick"];const F=["Sunday","Monday","Tuesday","Wednesday","Thursday","Firday","Saturday"],J=v({name:"TodoList",components:{DatePicker:t(L,[["render",function(e,t,a,n,o,m){return i(),l("div",{class:"date-picker",style:h({"--themeTextColor1":a.isDark?"#fff":"#464646","--themeTextColor2":a.isDark?"#464646":"#fff"})},[s("div",N,[s("div",{class:"calendar__head prev",onClick:t[0]||(t[0]=(...e)=>n.handlePrevClick&&n.handlePrevClick(...e))},T),s("div",B,c(n.labelMonth),1),s("div",{class:"calendar__head next",onClick:t[1]||(t[1]=(...e)=>n.handleNextClick&&n.handleNextClick(...e))},j),(i(!0),l(d,null,r(n.weekStrArr,((e,t)=>(i(),l("div",{class:"calendar__day",key:e+t},c(e),1)))),128)),(i(!0),l(d,null,r(n.dayList,(e=>(i(),l("div",{class:u(["calendar__number",{"not-this-month":e.month!==n.selectedMonth,active:e.value===a.date,tips:n.hasTodoListDates.includes(e.value)}]),key:e.value,onClick:t=>n.handleClickDay(e)},c(e.label),11,z)))),128))])],4)}],["__scopeId","data-v-644ae154"]])},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0},isAction:{type:Boolean,default:!1}},setup(e){const t=k(),n=o((()=>Y(e.componentSetting.themeColor||"#643a7a",50))),i=o((()=>x(e.componentSetting.themeColor||"#643a7a")<150)),l=a();g((()=>{l.value=b().format("YYYY-MM-DD")}));const s=a(""),c=a(!1),d=o((()=>e.componentSetting.todo[l.value]||[]));return{weekDay:o((()=>F[new Date(l.value).getDay()])),formatterDate:o((()=>{const e=new Date(l.value).toDateString().split(" ");return`${e[1]} ${e[2]}, ${e[3]}`})),todoList:d,handleChecked:a=>{const n=!d.value[a].isChecked,o=JSON.parse(JSON.stringify(e.element));e.isAction?(o.actionSetting.actionClickValue.componentSetting.todo[l.value][a].isChecked=n,t.commit("updateActionElement",o)):o.componentSetting.todo[l.value][a].isChecked=n,t.commit("editComponent",o)},handleRemove:a=>{const n=JSON.parse(JSON.stringify(e.element));e.isAction?(n.actionSetting.actionClickValue.componentSetting.todo[l.value].splice(a,1),t.commit("updateActionElement",n)):n.componentSetting.todo[l.value].splice(a,1),t.commit("editComponent",n)},handleAdd:()=>{s.value="";const a=JSON.parse(JSON.stringify(e.element)),n={content:"",isChecked:!1,isEditing:!0};e.isAction?(a.actionSetting.actionClickValue.componentSetting.todo[l.value]?a.actionSetting.actionClickValue.componentSetting.todo[l.value].push(n):a.actionSetting.actionClickValue.componentSetting.todo[l.value]=[n],t.commit("updateActionElement",a)):a.componentSetting.todo[l.value]?a.componentSetting.todo[l.value].push(n):a.componentSetting.todo[l.value]=[n],t.commit("editComponent",a)},handleEditSubmit:(a,n,o)=>{if(n.isEditing){const n=JSON.parse(JSON.stringify(e.element)),i=e.isAction?n.actionSetting.actionClickValue.componentSetting.todo[l.value]:n.componentSetting.todo[l.value];a.currentTarget.value?(i[o].content=s.value=a.currentTarget.value,i[o].isEditing=!1):i.splice(o,1),e.isAction&&t.commit("updateActionElement",n),t.commit("editComponent",n)}},editingValue:s,showDatePicker:c,date:l,updateDate:e=>{l.value=e.value},themeLightColor:n,isDark:i}}}),V=e=>(m("data-v-4c0c4730"),e=e(),p(),e),q={class:"head"},$={class:"list"},I=["checked"],K=["onClick"],R=["value","onBlur","onKeyup"],W=["onClick"],Z={class:"wrapper"},G=["width","height"],H=[V((()=>s("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1)))],Q=["onClick"],U=["width","height"],X=[V((()=>s("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1)))],ee={viewBox:"0 0 1024 1024",width:"20",height:"20"},te=["fill"];var ae=t(J,[["render",function(e,t,a,n,o,m){const p=f("DatePicker"),v=S("focus");return i(),l("div",{class:"todo-list-card",style:h({"--themeColor":e.componentSetting.themeColor,"--themeLightColor":e.themeLightColor,fontSize:e.componentSetting.baseFontSize+"px",padding:e.componentSetting.padding+"px"})},[s("div",q,[s("div",{class:"title",onClick:t[0]||(t[0]=t=>e.showDatePicker=!e.showDatePicker)},c(e.weekDay),1),s("div",{class:"subtitle",onClick:t[1]||(t[1]=t=>e.showDatePicker=!e.showDatePicker)},c(e.formatterDate),1),s("div",{class:u(["picker",{active:e.showDatePicker}])},[C(p,{date:e.date,todo:e.componentSetting.todo,onSelectDate:e.updateDate,isDark:e.isDark},null,8,["date","todo","onSelectDate","isDark"])],2)]),s("ul",$,[(i(!0),l(d,null,r(e.todoList,((t,a)=>(i(),l("li",{class:"list-item",key:t.content+a},[s("input",{type:"checkbox",name:"todo",checked:t.isChecked},null,8,I),t.isEditing?y((i(),l("input",{key:1,type:"text",class:"edit",value:e.editingValue,onBlur:n=>e.handleEditSubmit(n,t,a),onKeyup:D((n=>e.handleEditSubmit(n,t,a)),["enter"])},null,40,R)),[[v]]):(i(),l("div",{key:0,class:"text",onClick:t=>e.handleChecked(a)},c(t.content),9,K)),y(s("div",{class:"button",onClick:t=>e.handleChecked(a)},null,8,W),[[w,!t.isChecked]]),y(s("div",Z,[(i(),l("svg",{viewBox:"0 0 98.5 98.5",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},H,8,G))],512),[[w,t.isChecked]]),s("div",{class:"close",onClick:M((t=>e.handleRemove(a)),["stop"])},[(i(),l("svg",{viewBox:"0 0 1024 1024",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},X,8,U))],8,Q)])))),128))]),s("div",{class:"add",onClick:t[2]||(t[2]=(...t)=>e.handleAdd&&e.handleAdd(...t))},[(i(),l("svg",ee,[s("path",{fill:e.isDark?"#fff":"#464646",d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,8,te)]))])],4)}],["__scopeId","data-v-4c0c4730"]]);export{ae as default};
