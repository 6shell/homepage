import{a}from"./index.7f9368ca.js";import{d as e,b as l,z as s,o as t,h as i,q as r,F as n,j as o,n as c,t as u,s as v,p,f as d}from"./element-plus.4b059272.js";const m=v();p("data-v-6f45f611");const h={key:0,class:"wrapper"},g={class:"box"},f=r("div",{class:"title-wrapper clear"},[r("span",{class:"title fl"},"必应壁纸")],-1),y={key:0,class:"text"},k={key:1,class:"text"},b={key:2,class:"bing item-wrapper"},w={class:"img-wrapper"},x={class:"box"},C={class:"title-wrapper clear"},j=r("span",{class:"title fl"},"Unsplash",-1),z={key:0,class:"date fr"},$={key:0,class:"text"},_={key:1,class:"text"},E={key:2,class:"unsplash item-wrapper"},A={class:"img-wrapper"};d();var I=e({expose:[],emits:["submit"],setup(e,{emit:v}){const p=l(!1),d=l(),I=l([]),L=l(!1),S=l(!1),B=l([]),H=l(""),O=l(!1),U=l(!1),q=()=>{d.value.open(),p.value||(p.value=!0),(U.value||0===B.value.length)&&(async()=>{try{O.value=!0,U.value=!1;const e=await fetch(`${a}/photos`),{errCode:l,data:s}=await e.json();if(200!==l)throw new Error("Api server error");B.value=s.list,H.value=s.date}catch(e){U.value=!0,console.error(e)}finally{O.value=!1}})(),(S.value||0===I.value.length)&&(async()=>{try{L.value=!0,S.value=!1;const e=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN"),l=await fetch(`${a}/api/transfer?target=${e}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:s}=await l.json();if(!(s&&s.length>0))throw new Error("Api server error");I.value=s.map((a=>({url:`https://cn.bing.com/${a.url}`,thumb:`https://cn.bing.com/${a.urlbase}_320x240.jpg&rf=LaDigue_1920x1080.jpg&pid=hp`})))}catch(e){S.value=!0,console.error(e)}finally{L.value=!1}})()},D=()=>{},F=a=>{v("submit",a),d.value.close()};return(a,e)=>{const l=s("animation-dialog");return t(),i(n,null,[r("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:q},"今日壁纸推荐"),r(l,{ref:d,animationMode:"",title:"今日壁纸推荐",width:"min(760px, 94vw)",height:"min(480px, 80vh)",appendToBody:"",closeOnClickOutside:!1,listenWindowSizeChange:!0,onBeforeClose:D},{default:m((()=>[p.value?(t(),i("div",h,[r("div",g,[f,L.value?(t(),i("div",y,"Loading...")):S.value?(t(),i("div",k,"Something Error...")):(t(),i("div",b,[(t(!0),i(n,null,o(I.value,(a=>(t(),i("div",{class:"item",key:a.value,onClick:e=>F(a.url)},[r("div",w,[a.url?(t(),i("img",{key:0,src:a.thumb,loading:"lazy"},null,8,["src"])):c("",!0)])],8,["onClick"])))),128)),(t(),i(n,null,o(4,(a=>r("div",{class:"item-fake",key:a}))),64))]))]),r("div",x,[r("div",C,[j,H.value?(t(),i("span",z,u(H.value),1)):c("",!0)]),O.value?(t(),i("div",$,"Loading...")):U.value?(t(),i("div",_,"Something Error...")):(t(),i("div",E,[(t(!0),i(n,null,o(B.value,(a=>(t(),i("div",{class:"item",key:a.value,onClick:e=>F(a.urls.raw)},[r("div",A,[a.urls.thumb?(t(),i("img",{key:0,src:a.urls.thumb,loading:"lazy"},null,8,["src"])):c("",!0)])],8,["onClick"])))),128)),(t(),i(n,null,o(4,(a=>r("div",{class:"item-fake",key:a}))),64))]))])])):c("",!0)])),_:1},512)],64)}}});I.__scopeId="data-v-6f45f611";export default I;
