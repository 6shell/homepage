var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,a=(t,a)=>{for(var s in a||(a={}))n.call(a,s)&&i(t,s,a[s]);if(e)for(var s of e(a))o.call(a,s)&&i(t,s,a[s]);return t};import{_ as s,d as l,u as c,L as r,r as p,G as d,H as u,B as m,k as g,f as v,n as y,x as S,F as w,l as f,C as j,N as k,o as h,v as b,V as x}from"./index.4240df71.js";const _={class:"juejin"},O={key:0,class:"logo"},I={key:1,class:"loading"},F={key:2,class:"error"},L={key:3,class:"list"},T={class:"title"},$=["href"],A={class:"like"};var C=s(l({props:{componentSetting:{type:Object,required:!0}},setup(t){const e=t,n=c(),o=r((()=>n.state.isLock)),i=p([]),s=p(!1),l=p(!1),C=async()=>{try{s.value=!0,l.value=!1;const t=await fetch(`${x}/api/juejinList?limit=${e.componentSetting.limit||10}`),{list:n}=await t.json();i.value=n.map((t=>({id:t.article_id,title:t.title,like:t.digg_count,view:t.view_count})))}catch(t){l.value=!0,console.error(t)}finally{s.value=!1}};let P;function z(){C(),P&&window.clearInterval(P),P=window.setInterval((()=>{C()}),60*e.componentSetting.duration*1e3)}d((()=>z())),u((()=>window.clearInterval(P))),m((()=>[e.componentSetting.duration,e.componentSetting.limit]),(()=>z()));const q=r((()=>k(e.componentSetting.position))),B=()=>{1===e.componentSetting.clickActionType?z():2===e.componentSetting.clickActionType&&window.open("https://juejin.cn/")};return(e,n)=>(h(),g("div",{class:"wrapper",style:y(a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},j(q)))},[v("div",_,[!1!==t.componentSetting.showTitle?(h(),g("div",O,[v("img",{src:"https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/logo.a7995ad.svg",style:y({filter:`drop-shadow(${t.componentSetting.iconShadow})`,cursor:t.componentSetting.clickActionType?"pointer":"default"}),alt:"Juejin",onClick:B},null,4)])):S("",!0),s.value?(h(),g("div",I,"Loading...")):l.value?(h(),g("div",F,"Something error!")):(h(),g("div",L,[(h(!0),g(w,null,f(i.value,(t=>(h(),g("div",{class:"list-item",key:t.id},[v("div",T,[v("a",{href:`https://juejin.cn/post/${t.id}`,target:"_blank",style:y(j(o)?"pointer-events: none":"")},b(t.title),13,$)]),v("div",A,"👍"+b(t.like),1)])))),128))]))])],4))}}),[["__scopeId","data-v-24ec23d8"]]);export{C as default};
