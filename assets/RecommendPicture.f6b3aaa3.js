import{s as e,a}from"./index.7bb75ad0.js";import{d as l,e as s,o as t,j as i,s as r,F as n,k as o,q as c,t as u,a9 as v,u as p,p as d,h as m}from"./element-plus.12542cf9.js";const h=p();d("data-v-e6f85284");const g={key:0,class:"wrapper"},y={class:"box"},f=r("div",{class:"title-wrapper clear"},[r("span",{class:"title fl"},"必应壁纸")],-1),k={key:0,class:"text"},b={key:1,class:"text"},w={key:2,class:"bing item-wrapper"},x={class:"img-wrapper"},C={class:"box"},j={class:"title-wrapper clear"},$=r("span",{class:"title fl"},"Unsplash",-1),_={key:0,class:"date fr"},z={key:0,class:"text"},E={key:1,class:"text"},A={key:2,class:"unsplash item-wrapper"},I={class:"img-wrapper"};m();var L=l({expose:[],emits:["submit"],setup(l,{emit:p}){const d=s(!1),m=s(),L=s([]),S=s(!1),B=s(!1),H=s([]),O=s(""),U=s(!1),q=s(!1),D=()=>{m.value.open(),d.value||(d.value=!0),(q.value||0===H.value.length)&&(async()=>{try{U.value=!0,q.value=!1;const e=await fetch(`${a}/photos`),{errCode:l,data:s}=await e.json();if(200!==l)throw new Error("Api server error");H.value=s.list,O.value=s.date}catch(e){q.value=!0,console.error(e)}finally{U.value=!1}})(),(B.value||0===L.value.length)&&(async()=>{try{S.value=!0,B.value=!1;const e=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN"),l=await fetch(`${a}/api/transfer?target=${e}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:s}=await l.json();if(!(s&&s.length>0))throw new Error("Api server error");L.value=s.map((e=>({url:`https://cn.bing.com/${e.url}`,thumb:`https://cn.bing.com/${e.urlbase}_320x240.jpg&rf=LaDigue_1920x1080.jpg&pid=hp`})))}catch(e){B.value=!0,console.error(e)}finally{S.value=!1}})()},F=()=>{},M=e=>{p("submit",e),m.value.close()};return(a,l)=>(t(),i(n,null,[r("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:D},"今日壁纸推荐"),r(v(e),{ref:m,animationMode:"",title:"今日壁纸推荐",width:"min(760px, 94vw)",height:"min(480px, 80vh)",appendToBody:"",closeOnClickOutside:!1,listenWindowSizeChange:!0,onBeforeClose:F},{default:h((()=>[d.value?(t(),i("div",g,[r("div",y,[f,S.value?(t(),i("div",k,"Loading...")):B.value?(t(),i("div",b,"Something Error...")):(t(),i("div",w,[(t(!0),i(n,null,o(L.value,(e=>(t(),i("div",{class:"item",key:e.value,onClick:a=>M(e.url)},[r("div",x,[e.url?(t(),i("img",{key:0,src:e.thumb,loading:"lazy"},null,8,["src"])):c("",!0)])],8,["onClick"])))),128)),(t(),i(n,null,o(4,(e=>r("div",{class:"item-fake",key:e}))),64))]))]),r("div",C,[r("div",j,[$,O.value?(t(),i("span",_,u(O.value),1)):c("",!0)]),U.value?(t(),i("div",z,"Loading...")):q.value?(t(),i("div",E,"Something Error...")):(t(),i("div",A,[(t(!0),i(n,null,o(H.value,(e=>(t(),i("div",{class:"item",key:e.value,onClick:a=>M(e.urls.raw)},[r("div",I,[e.urls.thumb?(t(),i("img",{key:0,src:e.urls.thumb,loading:"lazy"},null,8,["src"])):c("",!0)])],8,["onClick"])))),128)),(t(),i(n,null,o(4,(e=>r("div",{class:"item-fake",key:e}))),64))]))])])):c("",!0)])),_:1},512)],64))}});L.__scopeId="data-v-e6f85284";export default L;
