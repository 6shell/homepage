var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,a=(t,a)=>{for(var s in a||(a={}))n.call(a,s)&&i(t,s,a[s]);if(e)for(var s of e(a))o.call(a,s)&&i(t,s,a[s]);return t};import{_ as s,d as c,u as l,L as r,r as p,G as d,H as m,B as g,k as u,f as v,n as y,x as w,F as h,l as S,C as f,z as b,A as k,N as x,o as j,v as O,V as I}from"./index.f64d86ad.js";const _={class:"weibo"},A=(t=>(b("data-v-1d6b49c2"),t=t(),k(),t))((()=>v("div",{class:"logo-text"},"微博热搜",-1))),F={key:1,class:"loading"},L={key:2,class:"error"},T={key:3,class:"list"},z={class:"num",style:{width:"24px",height:"24px"}},C=["src"],P={class:"title"},$=["href"],q={key:0,class:"count"},B={class:"icon",style:{width:"24px",height:"24px"}},E=["src"];var G=s(c({props:{componentSetting:{type:Object,required:!0}},setup(t){const e=t,n=l(),o=r((()=>n.state.isLock)),i=p([]),s=p(!1),c=p(!1),b=async()=>{try{s.value=!0,c.value=!1;const t=await fetch(`${I}/api/weiboList?limit=${e.componentSetting.limit||10}`),{list:n}=await t.json();i.value=n.map((t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)})))}catch(t){c.value=!0,console.error(t)}finally{s.value=!1}};let k;function G(){b(),k&&window.clearInterval(k),k=window.setInterval((()=>{b()}),60*e.componentSetting.duration*1e3)}d((()=>G())),m((()=>window.clearInterval(k))),g((()=>[e.componentSetting.duration,e.componentSetting.limit]),(()=>G()));const H=r((()=>x(e.componentSetting.position))),N=()=>{1===e.componentSetting.clickActionType?G():2===e.componentSetting.clickActionType&&window.open("https://weibo.com/")};return(e,n)=>(j(),u("div",{class:"wrapper",style:y(a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},f(H)))},[v("div",_,[!1!==t.componentSetting.showTitle?(j(),u("div",{key:0,class:"logo",style:y({cursor:t.componentSetting.clickActionType?"pointer":"default"}),onClick:N},[v("img",{src:"https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",alt:"Weibo",style:y({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},null,4),A],4)):w("",!0),s.value?(j(),u("div",F,"Loading...")):c.value?(j(),u("div",L,"Something error!")):(j(),u("div",T,[(j(!0),u(h,null,S(i.value,(t=>(j(),u("div",{class:"list-item",key:t.id},[v("div",z,[t.num?(j(),u("img",{key:0,src:t.num,style:{width:"100%",height:"100%"}},null,8,C)):w("",!0)]),v("div",P,[v("a",{href:t.link,target:"_blank",style:y(f(o)?"":"pointer-events: none")},O(t.title),13,$)]),t.count?(j(),u("div",q,O(t.count)+"w",1)):w("",!0),v("div",B,[t.icon?(j(),u("img",{key:0,src:t.icon,style:{width:"100%",height:"100%"}},null,8,E)):w("",!0)])])))),128))]))])],4))}}),[["__scopeId","data-v-1d6b49c2"]]);export{G as default};
