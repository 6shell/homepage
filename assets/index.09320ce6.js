var s=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(e,a,t)=>a in e?s(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,o=(s,o)=>{for(var r in o||(o={}))a.call(o,r)&&i(s,r,o[r]);if(e)for(var r of e(o))t.call(o,r)&&i(s,r,o[r]);return s};import{_ as r,d as n,L as c,r as d,B as g,k as m,f as h,n as v,v as l,N as w,V as b,P as u,o as p}from"./index.c651e262.js";var f="/Dashboard/assets/not-available.370934e3.svg";function y(s){return s.includes("风")?["龙卷风","狂爆风","飓风","热带风暴"].includes(s)?"龙卷风":"风":s.includes("霾")||s.includes("雾")?["重","大","浓","沙","尘"].some((e=>s.includes(e)))?"大雾":"小雾":s.includes("雨")?s.includes("雷")?"雷阵雨":s.includes("雪")?"雨夹雪":s.includes("大")||s.includes("暴")?"大雨":"小雨":s.includes("雪")?"雪":s}const D={"晴":"clear-day","少云":"cloudy","晴间多云":"overcast-day","多云":"overcast","阴":"overcast","平静":"overcast","风":"wind","龙卷风":"hurricane","大雾":"fog","小雾":"mist","雷阵雨":"thunderstorms-rain","大雨":"rain","小雨":"drizzle","雨夹雪":"sleet","雪":"snow","热":"thermometer-warmer","冷":"thermometer-colder","未知":"not-available"};function S(s,e=!0){const a=y(s)||"未知",t=D[a]||"not-available";return!1===e?function(s){return new URL({"../../assets/imgs/weather-static-icon/clear-day.svg":"/Dashboard/assets/clear-day.1750460c.svg","../../assets/imgs/weather-static-icon/cloudy.svg":"/Dashboard/assets/cloudy.166af3f1.svg","../../assets/imgs/weather-static-icon/drizzle.svg":"/Dashboard/assets/drizzle.52d1ab01.svg","../../assets/imgs/weather-static-icon/fog.svg":"/Dashboard/assets/fog.f25816bc.svg","../../assets/imgs/weather-static-icon/hurricane.svg":"/Dashboard/assets/hurricane.bf691091.svg","../../assets/imgs/weather-static-icon/mist.svg":"/Dashboard/assets/mist.a73979af.svg","../../assets/imgs/weather-static-icon/not-available.svg":f,"../../assets/imgs/weather-static-icon/overcast-day.svg":"/Dashboard/assets/overcast-day.65e5e477.svg","../../assets/imgs/weather-static-icon/overcast.svg":"/Dashboard/assets/overcast.404c05a4.svg","../../assets/imgs/weather-static-icon/rain.svg":"/Dashboard/assets/rain.5cfdb502.svg","../../assets/imgs/weather-static-icon/sleet.svg":"/Dashboard/assets/sleet.4e1d5513.svg","../../assets/imgs/weather-static-icon/snow.svg":"/Dashboard/assets/snow.3716e1b7.svg","../../assets/imgs/weather-static-icon/thermometer-colder.svg":"/Dashboard/assets/thermometer-colder.27e44f79.svg","../../assets/imgs/weather-static-icon/thermometer-warmer.svg":"/Dashboard/assets/thermometer-warmer.a2cb4247.svg","../../assets/imgs/weather-static-icon/thunderstorms-rain.svg":"/Dashboard/assets/thunderstorms-rain.a29ad635.svg","../../assets/imgs/weather-static-icon/wind.svg":"/Dashboard/assets/wind.2fc5eaed.svg"}[`../../assets/imgs/weather-static-icon/${s}.svg`],window.location).href}(t):function(s){return new URL({"../../assets/imgs/weather-animation-icon/clear-day.svg":"/Dashboard/assets/clear-day.49d8c731.svg","../../assets/imgs/weather-animation-icon/cloudy.svg":"/Dashboard/assets/cloudy.748e25f6.svg","../../assets/imgs/weather-animation-icon/drizzle.svg":"/Dashboard/assets/drizzle.a4dba4de.svg","../../assets/imgs/weather-animation-icon/fog.svg":"/Dashboard/assets/fog.3b9c20d0.svg","../../assets/imgs/weather-animation-icon/hurricane.svg":"/Dashboard/assets/hurricane.f598fa4b.svg","../../assets/imgs/weather-animation-icon/mist.svg":"/Dashboard/assets/mist.6bc8e890.svg","../../assets/imgs/weather-animation-icon/not-available.svg":"/Dashboard/assets/not-available.71622bd8.svg","../../assets/imgs/weather-animation-icon/overcast-day.svg":"/Dashboard/assets/overcast-day.8a30a844.svg","../../assets/imgs/weather-animation-icon/overcast.svg":"/Dashboard/assets/overcast.49e2e20c.svg","../../assets/imgs/weather-animation-icon/rain.svg":"/Dashboard/assets/rain.b26b9aff.svg","../../assets/imgs/weather-animation-icon/sleet.svg":"/Dashboard/assets/sleet.ff126866.svg","../../assets/imgs/weather-animation-icon/snow.svg":"/Dashboard/assets/snow.050f823c.svg","../../assets/imgs/weather-animation-icon/thermometer-colder.svg":"/Dashboard/assets/thermometer-colder.761f5be2.svg","../../assets/imgs/weather-animation-icon/thermometer-warmer.svg":"/Dashboard/assets/thermometer-warmer.dfa3e251.svg","../../assets/imgs/weather-animation-icon/thunderstorms-rain.svg":"/Dashboard/assets/thunderstorms-rain.5c8d2cef.svg","../../assets/imgs/weather-animation-icon/wind.svg":"/Dashboard/assets/wind.e44ecfa2.svg"}[`../../assets/imgs/weather-animation-icon/${s}.svg`],window.location).href}(t)}const x=n({name:"Weather",props:{componentSetting:{type:Object,required:!0}},setup(s){const e=c((()=>w(s.componentSetting.position))),a=d(""),t=d(""),i=d(f),o=d("24"),r=d("未知");return g((()=>[s.componentSetting.weatherMode,s.componentSetting.cityName,s.componentSetting.animationIcon]),(async()=>{try{if(1===s.componentSetting.weatherMode){const s=await fetch(`${b}/tapi/amap/v3/ip`),{status:e,adcode:i,city:o}=await s.json();"1"===e&&(a.value=o.replace(/[市城区]/g,""),t.value=i)}else{const e=await fetch(`${b}/tapi/amap/v3/config/district?keywords=${s.componentSetting.cityName}&subdistrict=0`),{status:i,districts:o}=await e.json();if("1"===i&&o.length>0){const s=o.find((s=>"city"===s.level)),{adcode:e,name:i}=s;a.value=i.replace(/[市城区]/g,""),t.value=e}}}catch{u({title:"提示",type:"error",message:"无法识别出城市，请重新配置"})}(async()=>{const e=await fetch(`${b}/tapi/amap/v3/weather/weatherInfo?extensions=base&city=${t.value}`),{status:a,lives:n}=await e.json();if("1"===a){const{weather:e,temperature:a}=n[0];i.value=S(e,s.componentSetting.animationIcon),r.value=y(e),o.value=a}})()}),{immediate:!0}),{positionCSS:e,cityName:a,adcode:t,weatherIcon:i,weatherText:r,temperature:o}}}),z={class:"weather-box"},j={class:"weather-icon-wrapper"},$=["src"],I={class:"weather-text-wrapper"},O={class:"temperature"},N={class:"city"};var P=r(x,[["render",function(s,e,a,t,i,r){return p(),m("div",{class:"wrapper",style:v(o({fontSize:s.componentSetting.baseFontSize+"px",color:s.componentSetting.textColor,textShadow:s.componentSetting.textShadow,padding:s.componentSetting.padding+"px",fontFamily:s.componentSetting.fontFamily},s.positionCSS))},[h("div",z,[h("div",j,[h("img",{src:s.weatherIcon,style:v({filter:`drop-shadow(${s.componentSetting.iconShadow})`}),alt:"weather icon"},null,12,$)]),h("div",I,[h("div",O,l(s.temperature)+"°",1),h("div",N,l(s.cityName)+" | "+l(s.weatherText),1)])])],4)}],["__scopeId","data-v-730329ad"]]);export{P as default};
