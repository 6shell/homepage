var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,a=(t,a)=>{for(var s in a||(a={}))n.call(a,s)&&i(t,s,a[s]);if(e)for(var s of e(a))o.call(a,s)&&i(t,s,a[s]);return t};import{_ as s,d as c,u as l,H as r,r as p,y as d,z as m,w as g,l as u,i as y,G as v,k as w,F as h,p as S,f as b,s as f,t as k,J as x,o as j,I as O,Q as I}from"./index.d3eb4bc8.js";const _={class:"weibo"},F=(t=>(f("data-v-1d6b49c2"),t=t(),k(),t))((()=>y("div",{class:"logo-text"},"微博热搜",-1))),T={key:1,class:"loading"},z={key:2,class:"error"},A={key:3,class:"list"},L={class:"num",style:{width:"24px",height:"24px"}},P=["src"],$={class:"title"},C=["href"],q={key:0,class:"count"},E={class:"icon",style:{width:"24px",height:"24px"}},G=["src"];var H=s(c({props:{componentSetting:{type:Object,required:!0}},setup(t){const e=t,n=l(),o=r((()=>n.state.isLock)),i=p([]),s=p(!1),c=p(!1),f=async()=>{try{s.value=!0,c.value=!1;const t=await fetch(`${I}/api/weiboList?limit=${e.componentSetting.limit||10}`),{list:n}=await t.json();i.value=n.map((t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)})))}catch(t){c.value=!0,console.error(t)}finally{s.value=!1}};let k;function H(){f(),k&&window.clearInterval(k),k=window.setInterval((()=>{f()}),60*e.componentSetting.duration*1e3)}d((()=>H())),m((()=>window.clearInterval(k))),g((()=>[e.componentSetting.duration,e.componentSetting.limit]),(()=>H()));const J=r((()=>x(e.componentSetting.position))),Q=()=>{1===e.componentSetting.clickActionType?H():2===e.componentSetting.clickActionType&&window.open("https://weibo.com/")};return(e,n)=>(j(),u("div",{class:"wrapper",style:v(a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},b(J)))},[y("div",_,[!1!==t.componentSetting.showTitle?(j(),u("div",{key:0,class:"logo",style:v({cursor:t.componentSetting.clickActionType?"pointer":"default"}),onClick:Q},[y("img",{src:"https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",alt:"Weibo",style:v({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},null,4),F],4)):w("",!0),s.value?(j(),u("div",T,"Loading...")):c.value?(j(),u("div",z,"Something error!")):(j(),u("div",A,[(j(!0),u(h,null,S(i.value,(t=>(j(),u("div",{class:"list-item",key:t.id},[y("div",L,[t.num?(j(),u("img",{key:0,src:t.num,style:{width:"100%",height:"100%"}},null,8,P)):w("",!0)]),y("div",$,[y("a",{href:t.link,target:"_blank",style:v(b(o)?"":"pointer-events: none")},O(t.title),13,C)]),t.count?(j(),u("div",q,O(t.count)+"w",1)):w("",!0),y("div",E,[t.icon?(j(),u("img",{key:0,src:t.icon,style:{width:"100%",height:"100%"}},null,8,G)):w("",!0)])])))),128))]))])],4))}}),[["__scopeId","data-v-1d6b49c2"]]);export{H as default};
