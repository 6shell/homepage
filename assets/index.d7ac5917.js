import{X as e,_ as t,r as a,B as o,L as i,o as n,k as l,f as s,v as c,F as d,l as r,K as h,n as u,z as m,A as p,d as v,u as k,G as g,b as f,Y as S,O as C,g as D,P as y,Z as w,U as M}from"./index.14864500.js";import{d as b}from"./dayjs.min.c872dc6e.js";import{l as Y,g as x}from"./color.556e4bcb.js";var O,_,A={exports:{}},P=A.exports=(O="week",_="year",function(e,t,a){var o=t.prototype;o.week=function(e){if(void 0===e&&(e=null),null!==e)return this.add(7*(e-this.week()),"day");var t=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var o=a(this).startOf(_).add(1,_).date(t),i=a(this).endOf(O);if(o.isBefore(i))return 1}var n=a(this).startOf(_).date(t).startOf(O).subtract(1,"millisecond"),l=this.diff(n,O,!0);return l<0?a(this).startOf("week").week():Math.ceil(l)},o.weeks=function(e){return void 0===e&&(e=null),this.week(e)}});b.extend(P);const L={name:"DatePicker",props:{date:String,todo:{type:Object,required:!0},isDark:{type:Boolean,default:!1}},emit:["selectDate"],setup(e,{emit:t}){const n=a("");o((()=>e.date),(e=>{n.value=b(e).format("YYYY-MM")}),{immediate:!0});return{weekStrArr:["S","M","T","W","T","F","S"],dayList:i((()=>{const e=b().month(b(n.value).month()).startOf("month");let t=b().week(b(e).week()).startOf("week");const a=[];for(let o=0;o<35;o++){const e=~~t.format("DD"),o=t.format("YYYY-MM-DD"),i=~~t.format("MM");a.push({label:e,value:o,month:i}),t=t.add(1,"d")}return a})),selectedMonth:i((()=>~~b(n.value).format("MM"))),labelMonth:i((()=>b(n.value).format("MMM, YYYY"))),hasTodoListDates:i((()=>Object.keys(e.todo).filter((t=>e.todo[t].some((e=>!e.isChecked)))))),handleClickDay:e=>t("selectDate",e),handlePrevClick:()=>{n.value=b(n.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{n.value=b(n.value).add(1,"month").format("YYYY-MM")}}}},T=e=>(m("data-v-68c5d07e"),e=e(),p(),e),E={class:"calendar__date"},B=[T((()=>s("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[s("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)))],N={class:"calendar__head content"},z=[T((()=>s("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[s("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)))],j=["onClick"];const F=["Sunday","Monday","Tuesday","Wednesday","Thursday","Firday","Saturday"],J=v({name:"TodoList",components:{DatePicker:t(L,[["render",function(e,t,a,o,i,m){return n(),l("div",{class:"date-picker",style:u({"--themeTextColor1":a.isDark?"#fff":"#464646","--themeTextColor2":a.isDark?"#464646":"#fff"})},[s("div",E,[s("div",{class:"calendar__head prev",onClick:t[0]||(t[0]=(...e)=>o.handlePrevClick&&o.handlePrevClick(...e))},B),s("div",N,c(o.labelMonth),1),s("div",{class:"calendar__head next",onClick:t[1]||(t[1]=(...e)=>o.handleNextClick&&o.handleNextClick(...e))},z),(n(!0),l(d,null,r(o.weekStrArr,((e,t)=>(n(),l("div",{class:"calendar__day",key:e+t},c(e),1)))),128)),(n(!0),l(d,null,r(o.dayList,(e=>(n(),l("div",{class:h(["calendar__number",{"not-this-month":e.month!==o.selectedMonth,active:e.value===a.date,tips:o.hasTodoListDates.includes(e.value)}]),key:e.value,onClick:t=>o.handleClickDay(e)},c(e.label),11,j)))),128))])],4)}],["__scopeId","data-v-68c5d07e"]])},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0},isAction:{type:Boolean,default:!1}},setup(e){const t=k(),o=i((()=>Y(e.componentSetting.themeColor||"#643a7a",50))),n=i((()=>x(e.componentSetting.themeColor||"#643a7a")<150)),l=a(),s=a(),c=a(270);g((()=>{var e,t;l.value=b().format("YYYY-MM-DD"),(null==(t=null==(e=s.value)?void 0:e.$el)?void 0:t.offsetHeight)&&(c.value=s.value.$el.offsetHeight+30)}));const d=a(""),r=a(!1),h=i((()=>e.componentSetting.todo[l.value]||[]));return{weekDay:i((()=>F[new Date(l.value).getDay()])),formatterDate:i((()=>{const e=new Date(l.value).toDateString().split(" ");return`${e[1]} ${e[2]}, ${e[3]}`})),todoList:h,handleChecked:a=>{const o=!h.value[a].isChecked,i=JSON.parse(JSON.stringify(e.element));e.isAction?(i.actionSetting.actionClickValue.componentSetting.todo[l.value][a].isChecked=o,t.commit("updateActionElement",i)):i.componentSetting.todo[l.value][a].isChecked=o,t.commit("editComponent",i)},handleRemove:a=>{const o=JSON.parse(JSON.stringify(e.element));e.isAction?(o.actionSetting.actionClickValue.componentSetting.todo[l.value].splice(a,1),t.commit("updateActionElement",o)):o.componentSetting.todo[l.value].splice(a,1),t.commit("editComponent",o)},handleAdd:()=>{d.value="";const a=JSON.parse(JSON.stringify(e.element)),o={content:"",isChecked:!1,isEditing:!0};e.isAction?(a.actionSetting.actionClickValue.componentSetting.todo[l.value]?a.actionSetting.actionClickValue.componentSetting.todo[l.value].push(o):a.actionSetting.actionClickValue.componentSetting.todo[l.value]=[o],t.commit("updateActionElement",a)):a.componentSetting.todo[l.value]?a.componentSetting.todo[l.value].push(o):a.componentSetting.todo[l.value]=[o],t.commit("editComponent",a)},handleEditSubmit:(a,o,i)=>{if(o.isEditing){const o=JSON.parse(JSON.stringify(e.element)),n=e.isAction?o.actionSetting.actionClickValue.componentSetting.todo[l.value]:o.componentSetting.todo[l.value];a.currentTarget.value?(n[i].content=d.value=a.currentTarget.value,n[i].isEditing=!1):n.splice(i,1),e.isAction&&t.commit("updateActionElement",o),t.commit("editComponent",o)}},editingValue:d,showDatePicker:r,date:l,updateDate:e=>{l.value=e.value},themeLightColor:o,isDark:n,dateTimePickerDom:s,pickerHeight:c}}}),V=e=>(m("data-v-119df1a3"),e=e(),p(),e),$={class:"head"},H={class:"list"},q=["checked"],K=["onClick"],Z=["value","onBlur","onKeyup"],I=["onClick"],R={class:"wrapper"},W=["width","height"],G=[V((()=>s("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1)))],U=["onClick"],X=["width","height"],Q=[V((()=>s("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1)))],ee={viewBox:"0 0 1024 1024",width:"20",height:"20"},te=["fill"];var ae=t(J,[["render",function(e,t,a,o,i,h){const m=f("DatePicker"),p=S("focus");return n(),l("div",{class:"todo-list-card",style:u({"--themeColor":e.componentSetting.themeColor,"--themeLightColor":e.themeLightColor,fontSize:e.componentSetting.baseFontSize+"px",padding:e.componentSetting.padding+"px"})},[s("div",$,[s("div",{class:"title",onClick:t[0]||(t[0]=C((t=>e.showDatePicker=!e.showDatePicker),["stop"]))},c(e.weekDay),1),s("div",{class:"subtitle",onClick:t[1]||(t[1]=C((t=>e.showDatePicker=!e.showDatePicker),["stop"]))},c(e.formatterDate),1),s("div",{class:"picker",style:u(e.showDatePicker?`border-bottom: 1px solid var(--themeLightColor); height: ${e.pickerHeight}px`:"")},[D(m,{ref:"dateTimePickerDom",date:e.date,todo:e.componentSetting.todo,onSelectDate:e.updateDate,isDark:e.isDark},null,8,["date","todo","onSelectDate","isDark"])],4)]),s("ul",H,[(n(!0),l(d,null,r(e.todoList,((t,a)=>(n(),l("li",{class:"list-item",key:t.content+a},[s("input",{type:"checkbox",name:"todo",checked:t.isChecked},null,8,q),t.isEditing?y((n(),l("input",{key:1,type:"text",class:"edit",value:e.editingValue,onBlur:o=>e.handleEditSubmit(o,t,a),onKeyup:w((o=>e.handleEditSubmit(o,t,a)),["enter"])},null,40,Z)),[[p]]):(n(),l("div",{key:0,class:"text",onClick:t=>e.handleChecked(a)},c(t.content),9,K)),y(s("div",{class:"button",onClick:t=>e.handleChecked(a)},null,8,I),[[M,!t.isChecked]]),y(s("div",R,[(n(),l("svg",{viewBox:"0 0 98.5 98.5",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},G,8,W))],512),[[M,t.isChecked]]),s("div",{class:"close",onClick:C((t=>e.handleRemove(a)),["stop"])},[(n(),l("svg",{viewBox:"0 0 1024 1024",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},Q,8,X))],8,U)])))),128))]),s("div",{class:"add",onClick:t[2]||(t[2]=(...t)=>e.handleAdd&&e.handleAdd(...t))},[(n(),l("svg",ee,[s("path",{fill:e.isDark?"#fff":"#464646",d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,8,te)]))])],4)}],["__scopeId","data-v-119df1a3"]]);export{ae as default};
