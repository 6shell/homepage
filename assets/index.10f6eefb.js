var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,r=(e,r)=>{for(var a in r||(r={}))o.call(r,a)&&i(e,a,r[a]);if(t)for(var a of t(r))n.call(r,a)&&i(e,a,r[a]);return e};"undefined"!=typeof require&&require;import{m as a,b as l,a as s}from"./index.656ddcf2.js";import{d as c,b as d,B as p,o as u,w as m,c as v,p as g,l as f,e as y,E as S,L as w,H as _,F as j,h as b,u as h}from"./element-plus.fcb38caf.js";var k=c({name:"JueJin",props:{componentSetting:{type:Object,required:!0}},setup(e){const t=d([]),o=d(!1),n=d(!1),i=async()=>{try{o.value=!0,n.value=!1;const{data:i,err_no:r}=await l(`${s}/api/transfer`,{target:"https://api.juejin.cn/recommend_api/v1/article/recommend_all_feed",_noHeaders:1,client_type:2680,cursor:"0",id_type:2,limit:e.componentSetting.limit||10,sort_type:200});if(0!==r)throw new Error("Api server error");{const e=i.map((e=>{var t;const o=null==(t=null==e?void 0:e.item_info)?void 0:t.article_info;return{id:null==o?void 0:o.article_id,title:null==o?void 0:o.title,like:null==o?void 0:o.digg_count,view:null==o?void 0:o.view_count}}));t.value=e}}catch(i){n.value=!0,console.error(i)}finally{o.value=!1}};let r;function c(){i(),r&&window.clearInterval(r),r=window.setInterval((()=>{i()}),60*e.componentSetting.duration*1e3)}p((()=>c())),u((()=>window.clearInterval(r))),m((()=>[e.componentSetting.duration,e.componentSetting.limit]),(()=>c()));const g=v((()=>a(e.componentSetting.position)));return{logo:"https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/logo.a7995ad.svg",list:t,positionCSS:g,loading:o,error:n}}});g("data-v-320ca56e");const x={class:"juejin"},O={class:"logo"},I=["src"],F={key:0,class:"loading"},$={key:1,class:"error"},q={key:2,class:"list"},C={class:"title"},E=["href"],J={class:"like"};f(),k.render=function(e,t,o,n,i,a){return y(),S("div",{class:"wrapper",style:_(r({fontSize:e.componentSetting.textFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily},e.positionCSS))},[w("div",x,[w("div",O,[w("img",{src:e.logo,alt:"Juejin",style:_({filter:`drop-shadow(${e.componentSetting.iconShadow})`})},null,12,I)]),e.loading?(y(),S("div",F,"Loading...")):e.error?(y(),S("div",$,"Something error!")):(y(),S("div",q,[(y(!0),S(j,null,b(e.list,(t=>(y(),S("div",{class:"list-item",key:t.id},[w("div",C,[w("a",{href:`https://juejin.cn/post/${t.id}`,target:"_blank",style:_(!e.$store.state.isLock&&"pointer-events: none")},h(t.title),13,E)]),w("div",J,"👍"+h(t.like),1)])))),128))]))])],4)},k.__scopeId="data-v-320ca56e";export default k;
