import{u as e}from"./index.2cea6597.js";import{e as t,w as a,f as o,aa as n,ab as i,p as l,h as s,o as d,j as c,s as r,t as h,F as m,k as u,u as v,C as p,A as k,L as g,m as C,ac as S,n as f}from"./element-plus.12542cf9.js";import{l as D,g as y}from"./color.556e4bcb.js";n.extend(i);var w={name:"DatePicker",props:{date:String,todo:{type:Object,required:!0},isDark:{type:Boolean,default:!1}},emit:["selectDate"],setup(e,{emit:i}){const l=t("");a((()=>e.date),(e=>{l.value=n(e).format("YYYY-MM")}),{immediate:!0});return{weekStrArr:["S","M","T","W","T","F","S"],dayList:o((()=>{const e=n().month(n(l.value).month()).startOf("month");let t=n().week(n(e).week()).startOf("week");const a=[];for(let o=0;o<35;o++){const e=~~t.format("DD"),o=t.format("YYYY-MM-DD"),n=~~t.format("MM");a.push({label:e,value:o,month:n}),t=t.add(1,"d")}return a})),selectedMonth:o((()=>~~n(l.value).format("MM"))),labelMonth:o((()=>n(l.value).format("MMM, YYYY"))),hasTodoListDates:o((()=>Object.keys(e.todo))),handleClickDay:e=>i("selectDate",e),handlePrevClick:()=>{l.value=n(l.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{l.value=n(l.value).add(1,"month").format("YYYY-MM")}}}};const b=v();l("data-v-644ae154");const M={class:"calendar__date"},Y=r("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[r("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1),x={class:"calendar__head content"},_=r("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[r("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1);s();const O=b(((e,t,a,o,n,i)=>(d(),c("div",{class:"date-picker",style:{"--themeTextColor1":a.isDark?"#fff":"#464646","--themeTextColor2":a.isDark?"#464646":"#fff"}},[r("div",M,[r("div",{class:"calendar__head prev",onClick:t[1]||(t[1]=(...e)=>o.handlePrevClick&&o.handlePrevClick(...e))},[Y]),r("div",x,h(o.labelMonth),1),r("div",{class:"calendar__head next",onClick:t[2]||(t[2]=(...e)=>o.handleNextClick&&o.handleNextClick(...e))},[_]),(d(!0),c(m,null,u(o.weekStrArr,((e,t)=>(d(),c("div",{class:"calendar__day",key:e+t},h(e),1)))),128)),(d(!0),c(m,null,u(o.dayList,(e=>(d(),c("div",{class:["calendar__number",{"not-this-month":e.month!==o.selectedMonth,active:e.value===a.date,tips:o.hasTodoListDates.includes(e.value)}],key:e.value,onClick:t=>o.handleClickDay(e)},h(e.label),11,["onClick"])))),128))])],4))));w.render=O,w.__scopeId="data-v-644ae154";const L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Firday","Saturday"];var P={name:"TodoList",components:{DatePicker:w},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0}},setup(a){const i=e(),l=o((()=>D(a.componentSetting.themeColor||"#643a7a",50))),s=o((()=>y(a.componentSetting.themeColor||"#643a7a")<150)),d=t();p((()=>{d.value=n().format("YYYY-MM-DD")}));const c=t(""),r=t(!1),h=o((()=>a.componentSetting.todo[d.value]||[]));return{weekDay:o((()=>L[new Date(d.value).getDay()])),formatterDate:o((()=>{const e=new Date(d.value).toDateString().split(" ");return`${e[1]} ${e[2]}, ${e[3]}`})),todoList:h,handleChecked:e=>{const t=!h.value[e].isChecked,o=JSON.parse(JSON.stringify(a.element));o.componentSetting.todo[d.value][e].isChecked=t,i.commit("editComponent",o)},handleRemove:e=>{const t=JSON.parse(JSON.stringify(a.element));t.componentSetting.todo[d.value].splice(e,1),i.commit("editComponent",t)},handleAdd:()=>{c.value="";const e=JSON.parse(JSON.stringify(a.element)),t={content:"",isChecked:!1,isEditing:!0};e.componentSetting.todo[d.value]?e.componentSetting.todo[d.value].push(t):e.componentSetting.todo[d.value]=[t],i.commit("editComponent",e)},handleEditSubmit:(e,t,o)=>{if(t.isEditing){const t=JSON.parse(JSON.stringify(a.element)),n=t.componentSetting.todo[d.value];e.currentTarget.value?(n[o].content=c.value=e.currentTarget.value,n[o].isEditing=!1):n.splice(o,1),i.commit("editComponent",t)}},editingValue:c,showDatePicker:r,date:d,updateDate:e=>{d.value=e.value},themeLightColor:l,isDark:s}}};const N=v();l("data-v-7448fbba");const T={class:"head"},j={class:"list"},z={class:"wrapper"},B=r("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1),E=r("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1),F={viewBox:"0 0 1024 1024",width:"20",height:"20"};s();const J=N(((e,t,a,o,n,i)=>{const l=k("DatePicker"),s=g("focus");return d(),c("div",{class:"todo-list-card",style:{"--themeColor":a.componentSetting.themeColor,"--themeLightColor":o.themeLightColor,fontSize:a.componentSetting.baseFontSize+"px",padding:a.componentSetting.padding+"px"}},[r("div",T,[r("div",{class:"title",onClick:t[1]||(t[1]=e=>o.showDatePicker=!o.showDatePicker)},h(o.weekDay),1),r("div",{class:"subtitle",onClick:t[2]||(t[2]=e=>o.showDatePicker=!o.showDatePicker)},h(o.formatterDate),1),r("div",{class:["picker",{active:o.showDatePicker}]},[r(l,{date:o.date,todo:a.componentSetting.todo,onSelectDate:o.updateDate,isDark:o.isDark},null,8,["date","todo","onSelectDate","isDark"])],2)]),r("ul",j,[(d(!0),c(m,null,u(o.todoList,((e,t)=>(d(),c("li",{class:"list-item",key:e.content+t},[r("input",{type:"checkbox",name:"todo",checked:e.isChecked},null,8,["checked"]),e.isEditing?C((d(),c("input",{key:1,type:"text",class:"edit",value:o.editingValue,onBlur:a=>o.handleEditSubmit(a,e,t),onKeyup:S((a=>o.handleEditSubmit(a,e,t)),["enter"])},null,40,["value","onBlur","onKeyup"])),[[s]]):(d(),c("div",{key:0,class:"text",onClick:e=>o.handleChecked(t)},h(e.content),9,["onClick"])),C(r("div",{class:"button",onClick:e=>o.handleChecked(t)},null,8,["onClick"]),[[f,!e.isChecked]]),C(r("div",z,[(d(),c("svg",{viewBox:"0 0 98.5 98.5",width:20*a.componentSetting.baseFontSize/16,height:20*a.componentSetting.baseFontSize/16},[B],8,["width","height"]))],512),[[f,e.isChecked]]),r("div",{class:"close",onClick:e=>o.handleRemove(t)},[(d(),c("svg",{viewBox:"0 0 1024 1024",width:20*a.componentSetting.baseFontSize/16,height:20*a.componentSetting.baseFontSize/16},[E],8,["width","height"]))],8,["onClick"])])))),128))]),r("div",{class:"add",onClick:t[3]||(t[3]=(...e)=>o.handleAdd&&o.handleAdd(...e))},[(d(),c("svg",F,[r("path",{fill:o.isDark?"#fff":"#464646",d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,8,["fill"])]))])],4)}));P.render=J,P.__scopeId="data-v-7448fbba";export default P;
