var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,a=(t,a)=>{for(var s in a||(a={}))o.call(a,s)&&i(t,s,a[s]);if(e)for(var s of e(a))n.call(a,s)&&i(t,s,a[s]);return t};import{_ as s,m as r,a as l}from"./index.67a913b1.js";import{z as c,C as d,Z as p,F as m,x as g,D as u,a1 as v,a6 as h,a2 as y,H as w,I as S,A as f,B as b,M as x,J as k,U as j}from"./element-plus.bd20adc7.js";const I=c({name:"JueJin",props:{componentSetting:{type:Object,required:!0}},setup(t){const e=d([]),o=d(!1),n=d(!1),i=async()=>{try{o.value=!0,n.value=!1;const i=encodeURIComponent("https://m.weibo.cn/api/container/getIndex?containerid=106003%2526filter_type%253Drealtimehot"),a=await fetch(`${l}/api/transfer?target=${i}`),{ok:s,data:r}=await a.json();if(1!==s)throw new Error("Api server error");{const o=r.cards[0].card_group.slice(0,t.componentSetting.limit).map((t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)})));e.value=o}}catch(i){n.value=!0,console.error(i)}finally{o.value=!1}};let a;function s(){i(),a&&window.clearInterval(a),a=window.setInterval((()=>{i()}),60*t.componentSetting.duration*1e3)}p((()=>s())),m((()=>window.clearInterval(a))),g((()=>[t.componentSetting.duration,t.componentSetting.limit]),(()=>s()));const c=u((()=>r(t.componentSetting.position)));return{logo:"https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",list:e,positionCSS:c,loading:o,error:n}}}),O={class:"weibo"},_={class:"logo"},C=["src"],F=(t=>(f("data-v-6d825457"),t=t(),b(),t))((()=>h("div",{class:"logo-text"},"微博热搜",-1))),$={key:0,class:"loading"},z={key:1,class:"error"},J={key:2,class:"list"},P={class:"num",style:{width:"24px",height:"24px"}},A=["src"],D={class:"title"},E=["href"],L={key:0,class:"count"},U={class:"icon",style:{width:"24px",height:"24px"}},q=["src"];var B=s(I,[["render",function(t,e,o,n,i,s){return x(),v("div",{class:"wrapper",style:y(a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},t.positionCSS))},[h("div",O,[h("div",_,[h("img",{src:t.logo,alt:"Weibo",style:y({filter:`drop-shadow(${t.componentSetting.iconShadow})`})},null,12,C),F]),t.loading?(x(),v("div",$,"Loading...")):t.error?(x(),v("div",z,"Something error!")):(x(),v("div",J,[(x(!0),v(w,null,S(t.list,(e=>(x(),v("div",{class:"list-item",key:e.id},[h("div",P,[e.num?(x(),v("img",{key:0,src:e.num,style:{width:"100%",height:"100%"}},null,8,A)):k("",!0)]),h("div",D,[h("a",{href:e.link,target:"_blank",style:y(!t.$store.state.isLock&&"pointer-events: none")},j(e.title),13,E)]),e.count?(x(),v("div",L,j(e.count)+"w",1)):k("",!0),h("div",U,[e.icon?(x(),v("img",{key:0,src:e.icon,style:{width:"100%",height:"100%"}},null,8,q)):k("",!0)])])))),128))]))])],4)}],["__scopeId","data-v-6d825457"]]);export{B as default};
