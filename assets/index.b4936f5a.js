var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,i=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,a=(t,a)=>{for(var s in a||(a={}))e.call(a,s)&&i(t,s,a[s]);if(o)for(var s of o(a))n.call(a,s)&&i(t,s,a[s]);return t};import{a as s,m as r}from"./index.1bfc9ea8.js";import{d as l,e as c,C as p,D as d,w as m,f as g,p as u,h as v,o as h,j as w,s as y,F as f,k as S,q as b,t as x,u as k}from"./element-plus.99702569.js";var j=l({name:"JueJin",props:{componentSetting:{type:Object,required:!0}},setup(t){const e=c([]),o=c(!1),n=c(!1),i=async()=>{try{o.value=!0,n.value=!1;const i=encodeURIComponent("https://m.weibo.cn/api/container/getIndex?containerid=106003%2526filter_type%253Drealtimehot"),a=await fetch(`${s}/api/transfer?target=${i}`),{ok:r,data:l}=await a.json();if(1!==r)throw new Error("Api server error");{const o=l.cards[0].card_group.slice(0,t.componentSetting.limit).map((t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)})));e.value=o}}catch(i){n.value=!0,console.error(i)}finally{o.value=!1}};let a;function l(){i(),a&&window.clearInterval(a),a=window.setInterval((()=>{i()}),60*t.componentSetting.duration*1e3)}p((()=>l())),d((()=>window.clearInterval(a))),m((()=>[t.componentSetting.duration,t.componentSetting.limit]),(()=>l()));const u=g((()=>r(t.componentSetting.position)));return{logo:"https://h5.sinaimg.cn/m/weibo-lite/img/pwalogo.417d1674.svg",list:e,positionCSS:u,loading:o,error:n}}});const I=k();u("data-v-b658a6e0");const O={class:"weibo"},_={class:"logo"},C=y("div",{class:"logo-text"},"微博热搜",-1),F={key:0,class:"loading"},$={key:1,class:"error"},P={key:2,class:"list"},q={class:"num",style:{width:"24px",height:"24px"}},z={class:"title"},D={key:0,class:"count"},E={class:"icon",style:{width:"24px",height:"24px"}};v();const J=I(((t,e,o,n,i,s)=>(h(),w("div",{class:"wrapper",style:a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},t.positionCSS)},[y("div",O,[y("div",_,[y("img",{src:t.logo,alt:"Weibo",style:{filter:`drop-shadow(${t.componentSetting.iconShadow})`}},null,12,["src"]),C]),t.loading?(h(),w("div",F,"Loading...")):t.error?(h(),w("div",$,"Something error!")):(h(),w("div",P,[(h(!0),w(f,null,S(t.list,(e=>(h(),w("div",{class:"list-item",key:e.id},[y("div",q,[e.num?(h(),w("img",{key:0,src:e.num,style:{width:"100%",height:"100%"}},null,8,["src"])):b("",!0)]),y("div",z,[y("a",{href:e.link,target:"_blank",style:!t.$store.state.isLock&&"pointer-events: none"},x(e.title),13,["href"])]),e.count?(h(),w("div",D,x(e.count)+"w",1)):b("",!0),y("div",E,[e.icon?(h(),w("img",{key:0,src:e.icon,style:{width:"100%",height:"100%"}},null,8,["src"])):b("",!0)])])))),128))]))])],4))));j.render=J,j.__scopeId="data-v-b658a6e0";export default j;
