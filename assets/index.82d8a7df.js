var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,l=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,n=(e,n)=>{for(var s in n||(n={}))t.call(n,s)&&l(e,s,n[s]);if(a)for(var s of a(n))o.call(n,s)&&l(e,s,n[s]);return e};import{d as s,D as i,a as r,M as d,r as u,o as c,b as m,c as p,w as g,u as h,e as f,f as b,g as v,h as k,i as y,j as L,k as w,l as C,U as _,p as S,m as V,t as O,n as I,F as z,q as E,s as W,v as U,x,y as A,z as M,W as T,A as D,B,G as P,C as j,X as $,E as N,O as R,Z as F,H as J}from"./vendor.c18ccd55.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const o=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const s=new URL(e,o);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const i=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){n(new Error(`Failed to import: ${e}`)),l(r)},onload(){a(self[t].moduleMap[s]),l(r)}});document.head.appendChild(r)})),self[t].moduleMap={}}}("/assets/");let H;const q={},G={1:"Empty"};var K=s({name:"Layout",components:{Draggable:i,Empty:r((()=>function(e,t){if(!t)return e();if(void 0===H){const e=document.createElement("link").relList;H=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in q)return;q[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":H,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>__import__("./Empty.68109b03.js")),["/assets/Empty.68109b03.js","/assets/Empty.0d52a65c.css","/assets/vendor.c18ccd55.js"])))},directives:{MouseMenu:d},props:{gutter:{type:Number,default:10}},setup(){const e=()=>{const e=window.innerWidth,t=window.innerWidth-10;return e<=721?t/12:e<=1921?t/24:t/36},t=u(e()),a=u(window.innerWidth-10);let o;const l=()=>{o&&window.clearTimeout(o),o=window.setTimeout((()=>{t.value=e(),a.value=window.innerWidth-10}),400)};c((()=>window.addEventListener("resize",l))),m((()=>window.removeEventListener("resize",l)));const n=h(),s=p((()=>n.state.isLock)),i=u([]);let r=!0;g((()=>n.state.list),(e=>{r&&(i.value=JSON.parse(JSON.stringify(e))),r=!0}),{immediate:!0});const d=u([{label:"编辑",tips:"Edit",fn:e=>{!function(e){console.log("edit",e)}(e)}},{label:"删除",tips:"Delete",fn:e=>{!function(e){n.commit("deleteComponentFromList",e)}(e)}}]);return{fr:t,windowWidth:a,cloneList:i,onChange:()=>{r=!1,n.commit("updateList",i)},isLock:s,menuList:d,MATERIAL_LIST_MAP:G}}});const X=C(),Z=X(((e,t,a,o,l,s)=>{const i=f("Draggable"),r=b("mouse-menu");return v(),k("div",{class:"wrapper",style:`width: ${e.windowWidth}px`},[y(i,{modelValue:e.cloneList,"onUpdate:modelValue":t[1]||(t[1]=t=>e.cloneList=t),"item-key":"id",tag:"transition-group","component-data":{name:"flip-list"},onChange:e.onChange,disabled:!e.isLock},{item:X((({element:t})=>[L(y("div",{class:"item",style:{width:~~(e.fr*t.w)+"px",height:~~(e.fr*t.h)+"px",padding:`${e.gutter}px`}},[y("div",{class:"item-content",style:`background: ${t.background}`},[(v(),k(w(e.MATERIAL_LIST_MAP[t.material]),n({},t.props),null,16))],4)],4),[[r,{params:t,menuList:e.menuList}]])])),_:1},8,["modelValue","onChange","disabled"])],4)}));K.render=Z,K.__scopeId="data-v-e78a0bd2";var Q=s({name:"BackgroundSelector",components:{ElColorPicker:_},props:{background:{type:String,default:""},sizeWidth:{type:Number,default:4}},setup(e,{emit:t}){const a=u(1),o=u("rgba(255,255,255,1)"),l=u(""),n=u("Wallpapers"),s=u("");g((()=>e.background),(e=>{if(!e||e.includes("transparent"))a.value=1;else if(e.includes("url")){const t=(e=>{const t=e.match(/url\(['"]?(.*?)['"]?\)/);return t&&t.length>=2?t[1]:""})(e);t.includes("/api/randomPhoto")?a.value=4:(a.value=3,l.value=t)}else a.value=2,o.value=e||"rgba(255,255,255,1)"}));const i=()=>{let i="";switch(a.value){case 1:i="transparent";break;case 2:i=o.value;break;case 3:i=`#CBCFF3 url(${l.value}) center center / cover`;break;case 4:i=`#CBCFF3 url(https://kongfandong.cn/api/randomPhoto?type=mirror&keyword=${"Custom"===n.value?s.value:n.value}&w=${80*e.sizeWidth}) center center / cover`}t("update:background",i)};return g((()=>e.sizeWidth),(()=>{i()})),{mode:a,bgImg:l,color:o,imgType:n,customImgType:s,handleBackgroundChange:i}}});const Y=C();S("data-v-e310f422");const ee=E("透明"),te=E("纯色"),ae=E("固定图片"),oe=E("随机图片"),le={key:0,class:"color-selecor"},ne={for:"color"},se={key:1,class:"img-url"},ie=y("label",{for:"img_url"},"URL",-1),re={key:2,class:"random-img-type"},de=y("label",{for:"img_type"},"Keyword",-1),ue=E("壁纸"),ce=E("自然"),me=E("人物"),pe=E("建筑"),ge=E("科技"),he=E("动物"),fe=E("自定义");V();const be=Y(((e,t,a,o,l,n)=>{const s=f("el-radio"),i=f("el-radio-group"),r=f("el-color-picker"),d=f("el-input");return v(),k(z,null,[y(i,{modelValue:e.mode,"onUpdate:modelValue":t[1]||(t[1]=t=>e.mode=t),onChange:e.handleBackgroundChange,style:{"margin-bottom":"5px"}},{default:Y((()=>[y(s,{label:1},{default:Y((()=>[ee])),_:1}),y(s,{label:2},{default:Y((()=>[te])),_:1}),y(s,{label:3},{default:Y((()=>[ae])),_:1}),y(s,{label:4},{default:Y((()=>[oe])),_:1})])),_:1},8,["modelValue","onChange"]),2===e.mode?(v(),k("div",le,[y(r,{modelValue:e.color,"onUpdate:modelValue":t[2]||(t[2]=t=>e.color=t),onChange:e.handleBackgroundChange,"show-alpha":""},null,8,["modelValue","onChange"]),y("label",ne,O(e.color),1)])):I("",!0),3===e.mode?(v(),k("div",se,[ie,y(d,{modelValue:e.bgImg,"onUpdate:modelValue":t[3]||(t[3]=t=>e.bgImg=t),placeholder:"输入图片URL",onChange:e.handleBackgroundChange},null,8,["modelValue","onChange"])])):I("",!0),4===e.mode?(v(),k("div",re,[de,y("div",null,[y(i,{modelValue:e.imgType,"onUpdate:modelValue":t[4]||(t[4]=t=>e.imgType=t),onChange:e.handleBackgroundChange},{default:Y((()=>[y(s,{label:"Wallpapers"},{default:Y((()=>[ue])),_:1}),y(s,{label:"Nature"},{default:Y((()=>[ce])),_:1}),y(s,{label:"People"},{default:Y((()=>[me])),_:1}),y(s,{label:"Architecture"},{default:Y((()=>[pe])),_:1}),y(s,{label:"Technology"},{default:Y((()=>[ge])),_:1}),y(s,{label:"Animals"},{default:Y((()=>[he])),_:1}),y(s,{label:"Custom"},{default:Y((()=>[fe])),_:1})])),_:1},8,["modelValue","onChange"]),"Custom"===e.imgType?(v(),k(d,{key:0,modelValue:e.customImgType,"onUpdate:modelValue":t[5]||(t[5]=t=>e.customImgType=t),modelModifiers:{lazy:!0},placeholder:"自定义关键词(英文)",onChange:e.handleBackgroundChange},null,8,["modelValue","onChange"])):I("",!0)])])):I("",!0)],64)}));Q.render=be,Q.__scopeId="data-v-e310f422";const ve={sizeWidth:4,sizeHeight:4,background:"transparent",material:1};var ke=s({name:"Setting",components:{AnimationDialog:W,BackgroundSelector:Q},emits:["add"],setup(e,{emit:t}){const a=u(),o=()=>{a.value.close()},l=U(n({},ve)),s=function(e,t=!1){return Object.keys(e).map((a=>({label:e[a],value:t?+a:a})))}(G,!0);return{dialog:a,handleOpenSetting:()=>{a.value.open()},handleCloseSetting:o,formData:l,handleAddComponent:()=>{t("add",l),o(),Object.assign(l,ve)},materialList:s}}});const ye=C();S("data-v-82bdc750");const Le={class:"form-control"},we=y("svg",{class:"divider",viewBox:"0 0 1024 1024",width:"20",height:"20"},[y("path",{d:"M755.2 832L512 588.8 268.8 832 192 755.2 435.2 512 192 268.8 268.8 192 512 435.2 755.2 192 832 268.8 588.8 512l243.2 243.2-76.8 76.8z",fill:"#292929"})],-1),Ce={class:"footer",style:{"text-align":"right",padding:"12px"}};V();const _e=ye(((e,t,a,o,l,n)=>{const s=f("el-option"),i=f("el-select"),r=f("el-form-item"),d=f("el-input-number"),u=f("BackgroundSelector"),c=f("el-form"),m=f("animation-dialog");return v(),k(z,null,[y("div",{class:"setting-btn",onClick:t[1]||(t[1]=(...t)=>e.handleOpenSetting&&e.handleOpenSetting(...t))},"添加组件"),y(m,{ref:"dialog",animationMode:!0,title:"添加组件",width:"400px",height:"500px",closeOnClickOutside:!1,listenWindowSizeChange:!0},{footer:ye((()=>[y("div",Ce,[y("button",{class:"btn",onClick:t[6]||(t[6]=(...t)=>e.handleCloseSetting&&e.handleCloseSetting(...t))},"取消"),y("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...t)=>e.handleAddComponent&&e.handleAddComponent(...t))},"添加")])])),default:ye((()=>[y(c,{ref:"form","label-width":"100px","label-position":"top"},{default:ye((()=>[y(r,{label:"Material"},{default:ye((()=>[y(i,{modelValue:e.formData.material,"onUpdate:modelValue":t[2]||(t[2]=t=>e.formData.material=t),style:{width:"150px"}},{default:ye((()=>[(v(!0),k(z,null,x(e.materialList,(e=>(v(),k(s,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(r,{label:"Size"},{default:ye((()=>[y("div",Le,[y(d,{modelValue:e.formData.sizeWidth,"onUpdate:modelValue":t[3]||(t[3]=t=>e.formData.sizeWidth=t),"controls-position":"right",min:1,max:24,style:{width:"100px"}},null,8,["modelValue"]),we,y(d,{modelValue:e.formData.sizeHeight,"onUpdate:modelValue":t[4]||(t[4]=t=>e.formData.sizeHeight=t),"controls-position":"right",min:1,max:24,style:{width:"100px"}},null,8,["modelValue"])])])),_:1}),y(r,{label:"Background"},{default:ye((()=>[y(u,{background:e.formData.background,"onUpdate:background":t[5]||(t[5]=t=>e.formData.background=t),sizeWidth:e.formData.sizeWidth},null,8,["background","sizeWidth"])])),_:1})])),_:1},512)])),_:1},512)],64)}));ke.render=_e,ke.__scopeId="data-v-82bdc750";var Se=s({name:"App",components:{Layout:K,Setting:ke},setup(){const e=h();return{handleAddComponent:t=>{const a={id:Math.random().toString(32).slice(2),w:t.sizeWidth,h:t.sizeHeight,material:t.material,background:t.background};console.log("newCompoent",a),e.commit("addComponentToList",a)},isLock:p((()=>e.state.isLock)),updateIsLock:()=>{e.commit("updateIsLock",!e.state.isLock)}}}});const Ve=C()(((e,t,a,o,l,n)=>{const s=f("Layout"),i=f("Setting");return v(),k(z,null,[y(s),y(i,{onAdd:e.handleAddComponent},null,8,["onAdd"]),y("div",{class:"lock",onClick:t[1]||(t[1]=(...t)=>e.updateIsLock&&e.updateIsLock(...t))},O(e.isLock?"Lock":"UnLock"),1)],64)}));Se.render=Ve,Se.__scopeId="data-v-fe8f8cf6";var Oe=A({state:{isLock:!1,list:JSON.parse(localStorage.getItem("list")||"[]")},mutations:{updateIsLock(e,t){e.isLock=t},updateList(e,t){e.list=t,localStorage.setItem("list",JSON.stringify(e.list))},addComponentToList(e,t){e.list=[...e.list,t],localStorage.setItem("list",JSON.stringify(e.list))},deleteComponentFromList(e,t){const a=t.id,o=e.list.findIndex((e=>e.id===a));if(~o){const t=JSON.parse(JSON.stringify(e.list));t.splice(o,1),e.list=t,localStorage.setItem("list",JSON.stringify(e.list))}}},actions:{},modules:{}});const Ie=M(Se);Ie.use(Oe);[T,D,B,P,j,$,N,R,F,J].map((e=>{Ie.component(e.name,e)})),Ie.config.globalProperties.$ELEMENT={size:"small"},Ie.mount("#app");
