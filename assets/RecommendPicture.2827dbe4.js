import{_ as a,d as e,r as l,w as t,b as s,l as i,i as r,j as n,e as u,m as c,f as o,F as v,h as p,o as d,E as m,O as h,R as g,p as b,k,I as y,Q as f}from"./index.bb742943.js";const w={key:0,class:"wrapper"},C={class:"tab-title-wrapper"},x={class:"tab-container"},j={key:0,class:"text"},$={key:1,class:"text"},z={key:2,class:"item-wrapper"},_=["onClick"],A={class:"img-wrapper"},I=["src"],E={class:"tab-container"},L={key:0,class:"text"},O={key:1,class:"text"},S={key:2,class:"item-wrapper"},H=["onClick"],N={class:"img-wrapper"},R=["src"],D={class:"sub-tab-container"},P=["onClick"],U={class:"tab-container"},q={class:"item-wrapper"},B=["onClick"],M={class:"img-wrapper"},W=["src"],F={class:"load-more"},G=["loading"];var K=a(e({emits:["submit"],setup(a,{emit:e}){const K=l(!1),Q=l(),T=l(1),J=l(!1),V=l(!1),X=l([]),Y=l([]),Z=l([]),aa=l(1),ea=[{label:"风景",value:9},{label:"4K",value:36},{label:"清新",value:15},{label:"萌宠",value:14},{label:"游戏",value:5},{label:"汽车",value:12},{label:"时尚",value:10},{label:"体育",value:16}],la=l(9),ta=async(a=!1)=>{a&&(Z.value=[],aa.value=1);try{J.value=!0,V.value=!1;const a=await fetch(`${f}/api/360img?cid=${la.value}&page=${aa.value}&pageSize=18`),{errno:e,data:l}=await a.json();if(0!==e)throw new Error("Api server error");Z.value=[...Z.value,...l.list.map((a=>({url:a.url.replace("http","https"),thumb:`${a.url.replace("http","https")}?x-oss-process=image/resize,w_300/quality,q_90`})))]}catch(e){V.value=!0,console.error(e)}finally{J.value=!1}},sa=()=>{Q.value.open(),K.value||(K.value=!0)};t((()=>[K.value,T.value,la.value]),(()=>{1===T.value?X.value&&0!==X.value.length||(async()=>{try{J.value=!0,V.value=!1;const a=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN"),e=await fetch(`${f}/api/transfer?target=${a}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:l}=await e.json(),t=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=8&n=8&mkt=zh-CN"),s=await fetch(`${f}/api/transfer?target=${t}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:i}=await s.json();i.shift();const r=[...l,...i];X.value=r.map((a=>({url:`https://cn.bing.com/${a.url}`,thumb:`https://cn.bing.com/${a.urlbase}_320x240.jpg&rf=LaDigue_1920x1080.jpg&pid=hp`})))}catch(a){V.value=!0,console.error(a)}finally{J.value=!1}})():2===T.value?Y.value&&0!==Y.value.length||(async()=>{try{J.value=!0,V.value=!1;const a=await fetch(`${f}/photos?pageSize=18`),{errCode:e,data:l}=await a.json();if(200!==e)throw new Error("Api server error");Y.value=l.list.map((a=>({url:a.urls.raw,thumb:a.urls.thumb})))}catch(a){V.value=!0,console.error(a)}finally{J.value=!1}})():3===T.value&&ta(!0)}));const ia=()=>{aa.value++,ta()},ra=()=>{},na=a=>{e("submit",a),Q.value.close()},ua=s(!0);return(a,e)=>{const l=p("animation-dialog");return d(),i(v,null,[r("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:sa},"今日壁纸推荐"),n(l,c({ref_key:"dialog",ref:Q,animationMode:"",title:"今日壁纸推荐",width:"min(760px, 94vw)",height:"min(520px, 80vh)",appendToBody:"",closeOnClickOutside:!1,listenWindowSizeChange:!0,onBeforeClose:ra},o(ua),{customWrapperClass:"recommend-picture"}),{default:u((()=>[K.value?(d(),i("div",w,[r("div",C,[r("div",{class:m(["title",1===T.value&&"active"]),onClick:e[0]||(e[0]=a=>T.value=1)},"必应壁纸",2),r("div",{class:m(["title",3===T.value&&"active"]),onClick:e[1]||(e[1]=a=>T.value=3)},"360壁纸",2),r("div",{class:m(["title",2===T.value&&"active"]),onClick:e[2]||(e[2]=a=>T.value=2)},"UNSPLAH",2)]),h(r("div",x,[J.value?(d(),i("div",j,"Loading...")):V.value?(d(),i("div",$,"Something Error...")):(d(),i("div",z,[(d(!0),i(v,null,b(X.value,(a=>(d(),i("div",{class:"item",key:a.url,onClick:e=>na(a.url)},[r("div",A,[a.url?(d(),i("img",{key:0,src:a.thumb,loading:"lazy"},null,8,I)):k("",!0)])],8,_)))),128)),(d(),i(v,null,b(4,(a=>r("div",{class:"item-fake",key:a}))),64))]))],512),[[g,1===T.value]]),h(r("div",E,[J.value?(d(),i("div",L,"Loading...")):V.value?(d(),i("div",O,"Something Error...")):(d(),i("div",S,[(d(!0),i(v,null,b(Y.value,(a=>(d(),i("div",{class:"item",key:a.url,onClick:e=>na(a.url)},[r("div",N,[a.url?(d(),i("img",{key:0,src:a.thumb,loading:"lazy"},null,8,R)):k("",!0)])],8,H)))),128)),(d(),i(v,null,b(4,(a=>r("div",{class:"item-fake",key:a}))),64))]))],512),[[g,2===T.value]]),h(r("div",D,[(d(),i(v,null,b(ea,(a=>r("div",{class:m(["sub-tab-title",la.value===a.value&&"active"]),key:a.value,onClick:e=>la.value=a.value},y(a.label),11,P))),64))],512),[[g,3===T.value]]),h(r("div",U,[r("div",q,[(d(!0),i(v,null,b(Z.value,(a=>(d(),i("div",{class:"item",key:a.url,onClick:e=>na(a.url)},[r("div",M,[a.url?(d(),i("img",{key:0,src:a.thumb,loading:"lazy"},null,8,W)):k("",!0)])],8,B)))),128)),(d(),i(v,null,b(4,(a=>r("div",{class:"item-fake",key:a}))),64))]),r("div",F,[r("button",{class:"btn btn-warning",loading:J.value,onClick:ia},y(J.value?"LOADING...":"LOAD MORE"),9,G)])],512),[[g,3===T.value]])])):k("",!0)])),_:1},16)],64)}}}),[["__scopeId","data-v-50d19a1f"]]);export{K as default};
