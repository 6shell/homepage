import{h as A,r as s,o as E,b as X,K as Y,x as j,s as w,t as D,ab as V,ac as L,m as N,d as f,e as O,J,D as P,z as K,A as M}from"./vendor.66f145fe.js";import{g as S}from"./direction.933aa86d.js";import{_ as U}from"./index.52a495f8.js";const q=A({props:{popoverCustomClass:{type:String},closeOnClickOutside:{type:Boolean,default:!0}},emits:["opend","closed"],setup(m,{expose:T,emit:h}){const b=m,t=s(!1),i=s(!1),p=s(""),_=s();E(()=>{document.addEventListener("click",g)}),X(()=>{document.removeEventListener("click",g)});const g=e=>{!b.closeOnClickOutside||t.value&&!_.value.contains(e.target)&&(t.value=!1)},a=s({width:200,height:200,top:0,left:0}),C=async(e,o)=>{setTimeout(()=>{if(!e.actionSetting)return;const{actionSetting:n}=e,{actionType:v,actionClickType:l,actionClickValue:c}=n;if(v===1&&l===1){const{w:r,h:u,direction:k}=c,[x,y,$,z]=S(o,{width:r||200,height:u||200},k);a.value={width:r||200,height:u||200,left:x,top:y},p.value=`${$-x}px ${z-y}px`,t.value=!0,i.value=k===0}})},d=()=>{t.value=!1,i.value=!1},B=(e,o)=>{t.value?d():C(e,o)},I=({w:e,h:o,direction:n},v)=>{setTimeout(()=>{const[l,c,r,u]=S(v,{width:e||200,height:o||200},n);a.value={width:e||200,height:o||200,left:l,top:c},p.value=`${r-l}px ${u-c}px`,t.value=!0,i.value=n===0})};return Y(()=>t.value,e=>{h(e?"opend":"closed")}),T({open:C,close:d,toggle:B,defaultOpen:I}),(e,o)=>{const n=N("Icon");return f(),j(L,{to:"body"},[w(V,{name:"zoomIn"},{default:D(()=>[t.value?(f(),O("div",{key:0,ref_key:"actionPopover",ref:_,class:K(["action-popover",m.popoverCustomClass]),style:M({width:a.value.width+"px",height:a.value.height+"px",top:a.value.top+"px",left:a.value.left+"px",transformOrigin:p.value})},[J(e.$slots,"default",{},void 0,!0),i.value?(f(),O("div",{key:0,class:"close",onClick:d},[w(n,{name:"close"})])):P("",!0)],6)):P("",!0)]),_:3})])}}});var Q=U(q,[["__scopeId","data-v-8065b1ea"]]);export{Q as default};
