import{u as e}from"./index.656ddcf2.js";import{b as t,w as a,c as o,af as n,ag as i,p as l,l as c,e as s,E as d,L as r,u as m,F as u,h,R as p,H as v,d as k,B as g,z as S,S as C,t as f,q as D,ah as y,s as w}from"./element-plus.fcb38caf.js";import{l as M,g as b}from"./color.556e4bcb.js";n.extend(i);var Y={name:"DatePicker",props:{date:String,todo:{type:Object,required:!0},isDark:{type:Boolean,default:!1}},emit:["selectDate"],setup(e,{emit:i}){const l=t("");a((()=>e.date),(e=>{l.value=n(e).format("YYYY-MM")}),{immediate:!0});return{weekStrArr:["S","M","T","W","T","F","S"],dayList:o((()=>{const e=n().month(n(l.value).month()).startOf("month");let t=n().week(n(e).week()).startOf("week");const a=[];for(let o=0;o<35;o++){const e=~~t.format("DD"),o=t.format("YYYY-MM-DD"),n=~~t.format("MM");a.push({label:e,value:o,month:n}),t=t.add(1,"d")}return a})),selectedMonth:o((()=>~~n(l.value).format("MM"))),labelMonth:o((()=>n(l.value).format("MMM, YYYY"))),hasTodoListDates:o((()=>Object.keys(e.todo))),handleClickDay:e=>i("selectDate",e),handlePrevClick:()=>{l.value=n(l.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{l.value=n(l.value).add(1,"month").format("YYYY-MM")}}}};l("data-v-644ae154");const x={class:"calendar__date"},_=[r("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[r("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)],A={class:"calendar__head content"},O=[r("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[r("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)],E=["onClick"];c(),Y.render=function(e,t,a,o,n,i){return s(),d("div",{class:"date-picker",style:v({"--themeTextColor1":a.isDark?"#fff":"#464646","--themeTextColor2":a.isDark?"#464646":"#fff"})},[r("div",x,[r("div",{class:"calendar__head prev",onClick:t[0]||(t[0]=(...e)=>o.handlePrevClick&&o.handlePrevClick(...e))},_),r("div",A,m(o.labelMonth),1),r("div",{class:"calendar__head next",onClick:t[1]||(t[1]=(...e)=>o.handleNextClick&&o.handleNextClick(...e))},O),(s(!0),d(u,null,h(o.weekStrArr,((e,t)=>(s(),d("div",{class:"calendar__day",key:e+t},m(e),1)))),128)),(s(!0),d(u,null,h(o.dayList,(e=>(s(),d("div",{class:p(["calendar__number",{"not-this-month":e.month!==o.selectedMonth,active:e.value===a.date,tips:o.hasTodoListDates.includes(e.value)}]),key:e.value,onClick:t=>o.handleClickDay(e)},m(e.label),11,E)))),128))])],4)},Y.__scopeId="data-v-644ae154";const L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Firday","Saturday"];var P=k({name:"TodoList",components:{DatePicker:Y},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0},isAction:{type:Boolean,default:!1}},setup(a){const i=e(),l=o((()=>M(a.componentSetting.themeColor||"#643a7a",50))),c=o((()=>b(a.componentSetting.themeColor||"#643a7a")<150)),s=t();g((()=>{s.value=n().format("YYYY-MM-DD")}));const d=t(""),r=t(!1),m=o((()=>a.componentSetting.todo[s.value]||[]));return{weekDay:o((()=>L[new Date(s.value).getDay()])),formatterDate:o((()=>{const e=new Date(s.value).toDateString().split(" ");return`${e[1]} ${e[2]}, ${e[3]}`})),todoList:m,handleChecked:e=>{const t=!m.value[e].isChecked,o=JSON.parse(JSON.stringify(a.element));a.isAction?(o.actionSetting.actionClickValue.componentSetting.todo[s.value][e].isChecked=t,i.commit("updateActionElement",o)):o.componentSetting.todo[s.value][e].isChecked=t,i.commit("editComponent",o)},handleRemove:e=>{const t=JSON.parse(JSON.stringify(a.element));a.isAction?(t.actionSetting.actionClickValue.componentSetting.todo[s.value].splice(e,1),i.commit("updateActionElement",t)):t.componentSetting.todo[s.value].splice(e,1),i.commit("editComponent",t)},handleAdd:()=>{d.value="";const e=JSON.parse(JSON.stringify(a.element)),t={content:"",isChecked:!1,isEditing:!0};a.isAction?(e.actionSetting.actionClickValue.componentSetting.todo[s.value]?e.actionSetting.actionClickValue.componentSetting.todo[s.value].push(t):e.actionSetting.actionClickValue.componentSetting.todo[s.value]=[t],i.commit("updateActionElement",e)):e.componentSetting.todo[s.value]?e.componentSetting.todo[s.value].push(t):e.componentSetting.todo[s.value]=[t],i.commit("editComponent",e)},handleEditSubmit:(e,t,o)=>{if(t.isEditing){const t=JSON.parse(JSON.stringify(a.element)),n=a.isAction?t.actionSetting.actionClickValue.componentSetting.todo[s.value]:t.componentSetting.todo[s.value];e.currentTarget.value?(n[o].content=d.value=e.currentTarget.value,n[o].isEditing=!1):n.splice(o,1),a.isAction&&i.commit("updateActionElement",t),i.commit("editComponent",t)}},editingValue:d,showDatePicker:r,date:s,updateDate:e=>{s.value=e.value},themeLightColor:l,isDark:c}}});l("data-v-fa6d2fa0");const N={class:"head"},T={class:"list"},B=["checked"],z=["onClick"],F=["value","onBlur","onKeyup"],J=["onClick"],V={class:"wrapper"},j=["width","height"],q=[r("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1)],R=["onClick"],$=["width","height"],I=[r("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1)],K={viewBox:"0 0 1024 1024",width:"20",height:"20"},W=["fill"];c(),P.render=function(e,t,a,o,n,i){const l=S("DatePicker"),c=C("focus");return s(),d("div",{class:"todo-list-card",style:v({"--themeColor":e.componentSetting.themeColor,"--themeLightColor":e.themeLightColor,fontSize:e.componentSetting.baseFontSize+"px",padding:e.componentSetting.padding+"px"})},[r("div",N,[r("div",{class:"title",onClick:t[0]||(t[0]=t=>e.showDatePicker=!e.showDatePicker)},m(e.weekDay),1),r("div",{class:"subtitle",onClick:t[1]||(t[1]=t=>e.showDatePicker=!e.showDatePicker)},m(e.formatterDate),1),r("div",{class:p(["picker",{active:e.showDatePicker}])},[f(l,{date:e.date,todo:e.componentSetting.todo,onSelectDate:e.updateDate,isDark:e.isDark},null,8,["date","todo","onSelectDate","isDark"])],2)]),r("ul",T,[(s(!0),d(u,null,h(e.todoList,((t,a)=>(s(),d("li",{class:"list-item",key:t.content+a},[r("input",{type:"checkbox",name:"todo",checked:t.isChecked},null,8,B),t.isEditing?D((s(),d("input",{key:1,type:"text",class:"edit",value:e.editingValue,onBlur:o=>e.handleEditSubmit(o,t,a),onKeyup:y((o=>e.handleEditSubmit(o,t,a)),["enter"])},null,40,F)),[[c]]):(s(),d("div",{key:0,class:"text",onClick:t=>e.handleChecked(a)},m(t.content),9,z)),D(r("div",{class:"button",onClick:t=>e.handleChecked(a)},null,8,J),[[w,!t.isChecked]]),D(r("div",V,[(s(),d("svg",{viewBox:"0 0 98.5 98.5",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},q,8,j))],512),[[w,t.isChecked]]),r("div",{class:"close",onClick:t=>e.handleRemove(a)},[(s(),d("svg",{viewBox:"0 0 1024 1024",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},I,8,$))],8,R)])))),128))]),r("div",{class:"add",onClick:t[2]||(t[2]=(...t)=>e.handleAdd&&e.handleAdd(...t))},[(s(),d("svg",K,[r("path",{fill:e.isDark?"#fff":"#464646",d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,8,W)]))])],4)},P.__scopeId="data-v-fa6d2fa0";export default P;
