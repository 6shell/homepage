import{s as e,a}from"./index.91649424.js";import{d as s,e as l,o as t,j as r,s as i,F as n,k as o,q as c,t as u,a9 as v,u as p,p as d,h as m}from"./element-plus.12542cf9.js";const h=p();d("data-v-d5a34268");const y={key:0,class:"wrapper"},g={class:"box"},k=i("div",{class:"title-wrapper clear"},[i("span",{class:"title fl"},"必应壁纸")],-1),f={key:0,class:"text"},w={key:1,class:"text"},b={key:2,class:"bing item-wrapper"},x={class:"img-wrapper"},C={class:"box"},j={class:"title-wrapper clear"},$=i("span",{class:"title fl"},"Unsplash",-1),_={key:0,class:"date fr"},z={key:0,class:"text"},E={key:1,class:"text"},A={key:2,class:"unsplash item-wrapper"},I={class:"img-wrapper"};m();var L=s({expose:[],emits:["submit"],setup(s,{emit:p}){const d=l(!1),m=l(),L=l([]),S=l(!1),B=l(!1),H=l([]),O=l(""),U=l(!1),q=l(!1),D=()=>{m.value.open(),d.value||(d.value=!0),(q.value||0===H.value.length)&&(async()=>{try{U.value=!0,q.value=!1;const e=await fetch(`${a}/photos`),{errCode:s,data:l}=await e.json();if(200!==s)throw new Error("Api server error");H.value=l.list,O.value=l.date}catch(e){q.value=!0,console.error(e)}finally{U.value=!1}})(),(B.value||0===L.value.length)&&(async()=>{try{S.value=!0,B.value=!1;const e=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN"),s=await fetch(`${a}/api/transfer?target=${e}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:l}=await s.json();if(!(l&&l.length>0))throw new Error("Api server error");L.value=l.map((e=>({url:`https://cn.bing.com/${e.url}`,thumb:`https://cn.bing.com/${e.urlbase}_320x240.jpg&rf=LaDigue_1920x1080.jpg&pid=hp`})))}catch(e){B.value=!0,console.error(e)}finally{S.value=!1}})()},F=()=>{},M=e=>{p("submit",e),m.value.close()};return(a,s)=>(t(),r(n,null,[i("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:D},"今日壁纸推荐"),i(v(e),{ref:m,animationMode:"",title:"今日壁纸推荐",width:"min(760px, 94vw)",height:"min(480px, 80vh)",appendToBody:"",closeOnClickOutside:!1,listenWindowSizeChange:!0,onBeforeClose:F},{default:h((()=>[d.value?(t(),r("div",y,[i("div",g,[k,S.value?(t(),r("div",f,"Loading...")):B.value?(t(),r("div",w,"Something Error...")):(t(),r("div",b,[(t(!0),r(n,null,o(L.value,(e=>(t(),r("div",{class:"item",key:e.value,onClick:a=>M(e.url)},[i("div",x,[e.url?(t(),r("img",{key:0,src:e.thumb,lazy:""},null,8,["src"])):c("",!0)])],8,["onClick"])))),128)),(t(),r(n,null,o(4,(e=>i("div",{class:"item-fake",key:e}))),64))]))]),i("div",C,[i("div",j,[$,O.value?(t(),r("span",_,u(O.value),1)):c("",!0)]),U.value?(t(),r("div",z,"Loading...")):q.value?(t(),r("div",E,"Something Error...")):(t(),r("div",A,[(t(!0),r(n,null,o(H.value,(e=>(t(),r("div",{class:"item",key:e.value,onClick:a=>M(e.urls.raw)},[i("div",I,[e.urls.thumb?(t(),r("img",{key:0,src:e.urls.thumb,lazy:""},null,8,["src"])):c("",!0)])],8,["onClick"])))),128)),(t(),r(n,null,o(4,(e=>i("div",{class:"item-fake",key:e}))),64))]))])])):c("",!0)])),_:1},512)],64))}});L.__scopeId="data-v-d5a34268";export default L;
