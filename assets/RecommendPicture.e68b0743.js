import{i as M,r,M as q,f as t,h as s,H as h,v as T,x as V,I as G,u as W,F as v,q as K,e as a,B as y,A as C,ah as k,y as p,G as w}from"./vendor.302cf276.js";import{_ as J,a as Q,f as $}from"./index.528048ac.js";const X={key:0,class:"wrapper"},Y={class:"tab-title-wrapper"},Z={class:"tab-container"},ee={key:0,class:"text"},te={key:1,class:"text"},ae={key:2,class:"item-wrapper"},se=["onClick"],le={class:"img-wrapper"},ne=["src"],oe={class:"tab-container"},ie={key:0,class:"text"},re={key:1,class:"text"},ue={key:2,class:"item-wrapper"},ce=["onClick"],ve={class:"img-wrapper"},de=["src"],pe={class:"sub-tab-container"},he=["onClick"],_e={class:"tab-container"},ge={class:"item-wrapper"},me=["onClick"],fe={class:"img-wrapper"},be=["src"],ye={class:"load-more"},Ce=["loading"],ke=M({emits:["submit"],setup(we,{emit:j}){const _=r(!1),x=r(),n=r(1),i=r(!1),u=r(!1),g=r([]),m=r([]),f=r([]),E=r(1),z=[{label:"\u98CE\u666F",value:9},{label:"4K",value:36},{label:"\u6E05\u65B0",value:15},{label:"\u840C\u5BA0",value:14},{label:"\u6E38\u620F",value:5},{label:"\u6C7D\u8F66",value:12},{label:"\u65F6\u5C1A",value:10},{label:"\u4F53\u80B2",value:16}],b=r(9),S=async()=>{try{i.value=!0,u.value=!1;const l=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN"),o=await fetch(`${$}/api/transfer?target=${l}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:d}=await o.json(),e=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=8&n=8&mkt=zh-CN"),c=await fetch(`${$}/api/transfer?target=${e}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:B}=await c.json();B.shift();const R=[...d,...B];g.value=R.map(P=>{const H=`https://cn.bing.com/${P.url}`,U=`https://cn.bing.com/${P.urlbase}_320x240.jpg&rf=LaDigue_1920x1080.jpg&pid=hp`;return{url:H,thumb:U}})}catch(l){u.value=!0,console.error(l)}finally{i.value=!1}},F=async()=>{try{i.value=!0,u.value=!1;const l=await fetch(`${$}/photos?pageSize=18`),{errCode:o,data:d}=await l.json();if(o===200)m.value=d.list.map(e=>({url:e.urls.raw,thumb:e.urls.thumb}));else throw new Error("Api server error")}catch(l){u.value=!0,console.error(l)}finally{i.value=!1}},A=async(l=!1)=>{l&&(f.value=[],E.value=1);try{i.value=!0,u.value=!1;const o=await fetch(`${$}/api/360img?cid=${b.value}&page=${E.value}&pageSize=18`),{errno:d,data:e}=await o.json();if(d===0)f.value=[...f.value,...e.list.map(c=>({url:c.url.replace("http","https"),thumb:`${c.url.replace("http","https")}?x-oss-process=image/resize,w_300/quality,q_90`}))];else throw new Error("Api server error")}catch(o){u.value=!0,console.error(o)}finally{i.value=!1}},I=()=>{x.value.open(),_.value||(_.value=!0)};q(()=>[_.value,n.value,b.value],()=>{n.value===1?(!g.value||g.value.length===0)&&S():n.value===2?(!m.value||m.value.length===0)&&F():n.value===3&&A(!0)});const N=()=>{E.value++,A()},O=()=>{},L=l=>{j("submit",l),x.value.close()},D=Q(!0);return(l,o)=>{const d=K("animation-dialog");return a(),t(v,null,[s("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:I},h(l.$t("\u4ECA\u65E5\u58C1\u7EB8\u63A8\u8350")),1),T(d,G({ref_key:"dialog",ref:x,animationMode:"",title:l.$t("\u4ECA\u65E5\u58C1\u7EB8\u63A8\u8350"),width:"min(760px, 94vw)",height:"min(520px, 80vh)",appendToBody:"",closeOnClickOutside:!1,listenWindowSizeChange:!0,onBeforeClose:O},W(D),{customWrapperClass:"recommend-picture"}),{default:V(()=>[_.value?(a(),t("div",X,[s("div",Y,[s("div",{class:y(["title",n.value===1&&"active"]),onClick:o[0]||(o[0]=e=>n.value=1)},h(l.$t("\u5FC5\u5E94\u58C1\u7EB8")),3),s("div",{class:y(["title",n.value===3&&"active"]),onClick:o[1]||(o[1]=e=>n.value=3)},h(l.$t("360\u58C1\u7EB8")),3),s("div",{class:y(["title",n.value===2&&"active"]),onClick:o[2]||(o[2]=e=>n.value=2)},"UNSPLAH",2)]),C(s("div",Z,[i.value?(a(),t("div",ee,"Loading...")):u.value?(a(),t("div",te,"Something Error...")):(a(),t("div",ae,[(a(!0),t(v,null,p(g.value,e=>(a(),t("div",{class:"item",key:e.url,onClick:c=>L(e.url)},[s("div",le,[e.url?(a(),t("img",{key:0,src:e.thumb,loading:"lazy"},null,8,ne)):w("",!0)])],8,se))),128)),(a(),t(v,null,p(4,e=>s("div",{class:"item-fake",key:e})),64))]))],512),[[k,n.value===1]]),C(s("div",oe,[i.value?(a(),t("div",ie,"Loading...")):u.value?(a(),t("div",re,"Something Error...")):(a(),t("div",ue,[(a(!0),t(v,null,p(m.value,e=>(a(),t("div",{class:"item",key:e.url,onClick:c=>L(e.url)},[s("div",ve,[e.url?(a(),t("img",{key:0,src:e.thumb,loading:"lazy"},null,8,de)):w("",!0)])],8,ce))),128)),(a(),t(v,null,p(4,e=>s("div",{class:"item-fake",key:e})),64))]))],512),[[k,n.value===2]]),C(s("div",pe,[(a(),t(v,null,p(z,e=>s("div",{class:y(["sub-tab-title",b.value===e.value&&"active"]),key:e.value,onClick:c=>b.value=e.value},h(l.$t(e.label)),11,he)),64))],512),[[k,n.value===3]]),C(s("div",_e,[s("div",ge,[(a(!0),t(v,null,p(f.value,e=>(a(),t("div",{class:"item",key:e.url,onClick:c=>L(e.url)},[s("div",fe,[e.url?(a(),t("img",{key:0,src:e.thumb,loading:"lazy"},null,8,be)):w("",!0)])],8,me))),128)),(a(),t(v,null,p(4,e=>s("div",{class:"item-fake",key:e})),64))]),s("div",ye,[s("button",{class:"btn btn-warning",loading:i.value,onClick:N},h(i.value?"LOADING...":"LOAD MORE"),9,Ce)])],512),[[k,n.value===3]])])):w("",!0)]),_:1},16,["title"])],64)}}});var Ee=J(ke,[["__scopeId","data-v-62a244aa"]]);export{Ee as default};
