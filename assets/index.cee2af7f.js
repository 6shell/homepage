var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,i=(e,i)=>{for(var r in i||(i={}))a.call(i,r)&&o(e,r,i[r]);if(t)for(var r of t(i))n.call(i,r)&&o(e,r,i[r]);return e};"undefined"!=typeof require&&require;import{m as r,a as s}from"./index.99786fc0.js";import{d as c,c as l,b as d,w as p,_ as u,p as m,e as w,f as h,E as v,L as f,H as y,u as g}from"./element-plus.01c37972.js";function S(e){return e.includes("风")?["龙卷风","狂爆风","飓风","热带风暴"].includes(e)?"龙卷风":"风":e.includes("霾")||e.includes("雾")?["重","大","浓","沙","尘"].some((t=>e.includes(t)))?"大雾":"小雾":e.includes("雨")?e.includes("雷")?"雷阵雨":e.includes("雪")?"雨夹雪":e.includes("大")||e.includes("暴")?"大雨":"小雨":e.includes("雪")?"雪":e}const b={"晴":"clear-day","少云":"cloudy","晴间多云":"overcast-day","多云":"overcast","阴":"overcast","平静":"overcast","风":"wind","龙卷风":"hurricane","大雾":"fog","小雾":"mist","雷阵雨":"thunderstorms-rain","大雨":"rain","小雨":"drizzle","雨夹雪":"sleet","雪":"snow","热":"high","冷":"low","未知":"new-moon"};var j=c({name:"Weather",props:{componentSetting:{type:Object,required:!0}},setup(e){const t=l((()=>r(e.componentSetting.position))),a=d(""),n=d(""),o=d("https://cdn.jsdelivr.net/gh/leon-kfd/weather-icons/production/line/all/clear-day.svg"),i=d("24"),c=d("未知"),m=async()=>{const e=await fetch(`${s}/tapi/amap/v3/weather/weatherInfo?extensions=base&city=${n.value}`),{status:t,lives:a}=await e.json();if("1"===t){const{weather:e,temperature:t}=a[0];o.value=function(e){const t=S(e)||"未知";return`https://cdn.jsdelivr.net/gh/leon-kfd/weather-icons/production/line/all/${b[t]||"new-moon"}.svg`}(e),c.value=S(e),i.value=t}};return p((()=>[e.componentSetting.weatherMode,e.componentSetting.cityName]),(async()=>{try{if(1===e.componentSetting.weatherMode){const e=await fetch(`${s}/tapi/amap/v3/ip`),{status:t,adcode:o,city:i}=await e.json();"1"===t&&(a.value=i.replace(/[市城区]/g,""),n.value=o)}else{const t=await fetch(`${s}/tapi/amap/v3/config/district?keywords=${e.componentSetting.cityName}&subdistrict=0`),{status:o,districts:i}=await t.json();if("1"===o&&i.length>0){const e=i.find((e=>"city"===e.level)),{adcode:t,name:o}=e;a.value=o.replace(/[市城区]/g,""),n.value=t}}}catch{u({title:"提示",type:"error",message:"无法识别出城市，请重新配置"})}m()}),{immediate:!0}),{positionCSS:t,cityName:a,adcode:n,weatherIcon:o,weatherText:c,temperature:i}}});m("data-v-7d0819b0");const x={class:"weather-box"},O={class:"weather-icon-wrapper"},$=["src"],I={class:"weather-text-wrapper"},z={class:"temperature"},N={class:"city"};w(),j.render=function(e,t,a,n,o,r){return h(),v("div",{class:"wrapper",style:y(i({fontSize:e.componentSetting.baseFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily},e.positionCSS))},[f("div",x,[f("div",O,[f("img",{src:e.weatherIcon,style:y({filter:`drop-shadow(${e.componentSetting.iconShadow})`}),alt:"weather icon"},null,12,$)]),f("div",I,[f("div",z,g(e.temperature)+"°",1),f("div",N,g(e.cityName)+" | "+g(e.weatherText),1)])])],4)},j.__scopeId="data-v-7d0819b0";export default j;
