var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,s)=>{for(var i in s||(s={}))t.call(s,i)&&o(e,i,s[i]);if(a)for(var i of a(s))n.call(s,i)&&o(e,i,s[i]);return e};import{m as i}from"./index.b6061574.js";import{a as r}from"./global.69472560.js";import{d as c,f as l,e as d,w as p,p as u,h as m,o as w,j as v,s as h,t as f,u as g}from"./element-plus.9cd31797.js";function y(e){return e.includes("风")?["龙卷风","狂爆风","飓风","热带风暴"].includes(e)?"龙卷风":"风":e.includes("霾")||e.includes("雾")?["重","大","浓","沙","尘"].some((t=>e.includes(t)))?"大雾":"小雾":e.includes("雨")?e.includes("雷")?"雷阵雨":e.includes("雪")?"雨夹雪":e.includes("大")||e.includes("暴")?"大雨":"小雨":e.includes("雪")?"雪":e}const S={"晴":"clear-day","少云":"cloudy","晴间多云":"overcast-day","多云":"overcast","阴":"overcast","平静":"overcast","风":"wind","龙卷风":"hurricane","大雾":"fog","小雾":"mist","雷阵雨":"thunderstorms-rain","大雨":"rain","小雨":"drizzle","雨夹雪":"sleet","雪":"snow","热":"high","冷":"low","未知":"new-moon"};var b=c({name:"Weather",props:{componentSetting:{type:Object,required:!0}},setup(e){const t=l((()=>i(e.componentSetting.position))),a=d(""),n=d(""),o=d("https://cdn.jsdelivr.net/gh/leon-kfd/weather-icons/production/line/all/clear-day.svg"),s=d("24"),c=d("未知"),u=async()=>{const e=await fetch(`${r}/tapi/amap/v3/weather/weatherInfo?extensions=base&city=${n.value}`),{status:t,lives:a}=await e.json();if("1"===t){const{weather:e,temperature:t}=a[0];o.value=function(e){const t=y(e)||"未知";return`https://cdn.jsdelivr.net/gh/leon-kfd/weather-icons/production/line/all/${S[t]||"new-moon"}.svg`}(e),c.value=y(e),s.value=t}};return p((()=>[e.componentSetting.weatherMode,e.componentSetting.cityName]),(async()=>{if(1===e.componentSetting.weatherMode){const e=await fetch(`${r}/tapi/amap/v3/ip`),{status:t,adcode:o,city:s}=await e.json();"1"===t&&(a.value=s.replace(/[市城区]/g,""),n.value=o)}else{const t=await fetch(`${r}/tapi/amap/v3/config/district?keywords=${e.componentSetting.cityName}&subdistrict=0`),{status:o,districts:s}=await t.json();if("1"===o&&s.length>0){const e=s.find((e=>"city"===e.level)),{adcode:t,name:o}=e;a.value=o.replace(/[市城区]/g,""),n.value=t}}u()}),{immediate:!0}),{positionCSS:t,cityName:a,adcode:n,weatherIcon:o,weatherText:c,temperature:s}}});const j=g();u("data-v-d97ab096");const x={class:"weather-box"},O={class:"weather-icon-wrapper"},$={class:"weather-text-wrapper"},I={class:"temperature"},z={class:"city"};m();const N=j(((e,t,a,n,o,i)=>(w(),v("div",{class:"wrapper",style:s({fontSize:e.componentSetting.baseFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px"},e.positionCSS)},[h("div",x,[h("div",O,[h("img",{src:e.weatherIcon,alt:"weather icon"},null,8,["src"])]),h("div",$,[h("div",I,f(e.temperature)+"°",1),h("div",z,f(e.cityName)+" · "+f(e.weatherText),1)])])],4))));b.render=N,b.__scopeId="data-v-d97ab096";export default b;
