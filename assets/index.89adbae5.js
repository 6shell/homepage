var t=Object.defineProperty,e=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,i=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,a=(t,a)=>{for(var s in a||(a={}))e.call(a,s)&&i(t,s,a[s]);if(o)for(var s of o(a))n.call(a,s)&&i(t,s,a[s]);return t};import{a as s}from"./global.69472560.js";import{m as r}from"./index.fa5b0e3b.js";import{d as l,e as c,C as p,D as d,w as m,f as g,p as u,h as v,o as y,j as h,s as f,F as w,k as S,q as b,t as x,u as k}from"./element-plus.99702569.js";var j=l({name:"JueJin",props:{componentSetting:{type:Object,required:!0}},setup(t){const e=c([]),o=c(!1),n=c(!1),i=async()=>{try{o.value=!0,n.value=!1;const i=encodeURIComponent("https://m.weibo.cn/api/container/getIndex?containerid=106003%2526filter_type%253Drealtimehot"),a=await fetch(`${s}/api/transfer?target=${i}`),{ok:r,data:l}=await a.json();if(1!==r)throw new Error("Api server error");{const o=l.cards[0].card_group.slice(0,t.componentSetting.limit).map((t=>({num:t.pic,id:t.desc,title:t.desc,icon:t.icon,link:t.scheme,count:~~(t.desc_extr/1e4)})));e.value=o}}catch(i){n.value=!0,console.error(i)}finally{o.value=!1}};let a;function l(){i(),a&&window.clearInterval(a),a=window.setInterval((()=>{i()}),60*t.componentSetting.duration*1e3)}p((()=>l())),d((()=>window.clearInterval(a))),m((()=>[t.componentSetting.duration,t.componentSetting.limit]),(()=>l()));const u=g((()=>r(t.componentSetting.position)));return{logo:"https://img.t.sinajs.cn/t6/style/images/global_nav/WB_logo.png",list:e,positionCSS:u,loading:o,error:n}}});const _=k();u("data-v-46cf1c5d");const I={class:"weibo"},O={class:"logo"},C={key:0,class:"loading"},F={key:1,class:"error"},$={key:2,class:"list"},J={class:"num",style:{width:"24px",height:"24px"}},P={class:"title"},q={key:0,class:"count"},z={class:"icon",style:{width:"24px",height:"24px"}};v();const D=_(((t,e,o,n,i,s)=>(y(),h("div",{class:"wrapper",style:a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},t.positionCSS)},[f("div",I,[f("div",O,[f("img",{src:t.logo,alt:"Juejin",style:{filter:`drop-shadow(${t.componentSetting.iconShadow})`}},null,12,["src"])]),t.loading?(y(),h("div",C,"Loading...")):t.error?(y(),h("div",F,"Something error!")):(y(),h("div",$,[(y(!0),h(w,null,S(t.list,(e=>(y(),h("div",{class:"list-item",key:e.id},[f("div",J,[e.num?(y(),h("img",{key:0,src:e.num,style:{width:"100%",height:"100%"}},null,8,["src"])):b("",!0)]),f("div",P,[f("a",{href:e.link,target:"_blank",style:!t.$store.state.isLock&&"pointer-events: none"},x(e.title),13,["href"])]),e.count?(y(),h("div",q,x(e.count)+"w",1)):b("",!0),f("div",z,[e.icon?(y(),h("img",{key:0,src:e.icon,style:{width:"100%",height:"100%"}},null,8,["src"])):b("",!0)])])))),128))]))])],4))));j.render=D,j.__scopeId="data-v-46cf1c5d";export default j;
