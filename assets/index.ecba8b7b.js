var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,i=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,s=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&i(e,n,t[n]);if(o)for(var n of o(t))c.call(t,n)&&i(e,n,t[n]);return e};import{_ as l,d as r,a0 as p,r as v,B as m,G as u,H as d,L as g,k as h,R as w,W as S,n as y,x as f,f as b,v as x,C as O,V as k,N as j,O as q,P as z,o as C,z as P,A as T}from"./index.115d644b.js";const V=e=>(P("data-v-6ce3a6c8"),e=e(),T(),e),W=["src"],A={class:"quote-left"},B=[V((()=>b("svg",{viewBox:"0 0 1024 1024"},[b("path",{d:"M928 512h-160v-128c0-70.6 57.4-128 128-128h16c26.6 0 48-21.4 48-48V112c0-26.6-21.4-48-48-48h-16c-176.8 0-320 143.2-320 320v480c0 53 43 96 96 96h256c53 0 96-43 96-96V608c0-53-43-96-96-96z m-576 0H192v-128c0-70.6 57.4-128 128-128h16c26.6 0 48-21.4 48-48V112c0-26.6-21.4-48-48-48h-16C143.2 64 0 207.2 0 384v480c0 53 43 96 96 96h256c53 0 96-43 96-96V608c0-53-43-96-96-96z"})],-1)))],I={class:"quote-right"},_=[V((()=>b("svg",{viewBox:"0 0 1024 1024"},[b("path",{d:"M928 64H672c-53 0-96 43-96 96v256c0 53 43 96 96 96h160v128c0 70.6-57.4 128-128 128h-16c-26.6 0-48 21.4-48 48v96c0 26.6 21.4 48 48 48h16c176.8 0 320-143.2 320-320V160c0-53-43-96-96-96z m-576 0H96C43 64 0 107 0 160v256c0 53 43 96 96 96h160v128c0 70.6-57.4 128-128 128h-16c-26.6 0-48 21.4-48 48v96c0 26.6 21.4 48 48 48h16c176.8 0 320-143.2 320-320V160c0-53-43-96-96-96z"})],-1)))];var D=l(r({props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0}},setup(e){const o=e;p((e=>({bf786656:O(R)})));const a=v(),c=v(),i=v(),l=v(""),r=v(""),P=v(""),T=v(""),V=v(""),D=v(!1),F=async()=>{try{const e=await fetch(`${k}/api/movieLines`),{name:t,img:n,img1:o,img2:a,img3:c,img4:i,link:s,quotes:p}=await e.json();l.value=p,r.value=t,P.value=n.replace("s_ratio_poster","m");const v=[o,o,a,c,i].filter(Boolean),m=v[~~(Math.random()*v.length)];window.innerWidth<768?T.value=m.replace("original","w780"):window.innerWidth<1460?T.value=m.replace("original","w1280"):T.value=m,V.value=s}catch{}};let H;const L=()=>{const e=60*(o.componentSetting.duration||5)*1e3;H&&(window.clearInterval(H),H=null),H=window.setInterval(F,e)};m((()=>o.componentSetting.duration),(()=>L()),{immediate:!0}),u((()=>F())),d((()=>H&&window.clearInterval(H)));const M=g((()=>j(o.componentSetting.position))),R=g((()=>o.componentSetting.themeColor));m((()=>l.value),(()=>{a.value&&a.value.animate&&a.value.animate({opacity:[0,1]},400),c.value&&c.value.animate&&c.value.animate({opacity:[0,1]},400)}));const E=()=>{D.value=!0,i.value&&i.value.animate&&i.value.animate({opacity:[0,1]},400)},G=()=>{1===o.componentSetting.clickActionType?(F(),L()):2===o.componentSetting.clickActionType?window.open(V.value):3===o.componentSetting.clickActionType&&q(l.value)&&z({title:"提示",type:"success",message:"复制成功"})};return(o,p)=>{return C(),h("div",{class:"wrapper",style:y((v=s({fontSize:e.componentSetting.textFontSize+"px",color:e.componentSetting.textColor,textShadow:e.componentSetting.textShadow,padding:e.componentSetting.padding+"px",fontFamily:e.componentSetting.fontFamily},O(M)),m={borderRadius:e.element.borderRadius+"px"},t(v,n(m))))},[e.componentSetting.showPoster?w((C(),h("img",{key:0,class:"bg",ref:(e,t)=>{t.movieBg=e,i.value=e},src:2===e.componentSetting.posterType?T.value:P.value,style:y({filter:e.componentSetting.posterFilter}),onLoad:E},null,44,W)),[[S,D.value]]):f("",!0),b("blockquote",{class:"blockquote",style:y({background:e.componentSetting.showDecoration?"":"none",maxWidth:e.componentSetting.maxWidth?e.componentSetting.maxWidth+"px":"",cursor:e.componentSetting.clickActionType?"pointer":"default"}),onClick:G},[b("p",{class:"lines",ref:(e,t)=>{t.linesText=e,a.value=e}},x(l.value),513),w(b("p",{class:"cite",ref:(e,t)=>{t.movieText=e,c.value=e}},"『 "+x(r.value)+" 』",513),[[S,e.componentSetting.showCite]]),w(b("div",A,B,512),[[S,e.componentSetting.showDecoration]]),w(b("div",I,_,512),[[S,e.componentSetting.showDecoration]])],4)],4);var v,m}}}),[["__scopeId","data-v-6ce3a6c8"]]);export{D as default};
