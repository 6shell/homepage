var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,a=(t,a)=>{for(var s in a||(a={}))n.call(a,s)&&i(t,s,a[s]);if(e)for(var s of e(a))o.call(a,s)&&i(t,s,a[s]);return t};import{_ as s,d as l,u as c,H as r,r as p,y as d,z as u,w as m,l as g,i as v,G as y,k as w,F as S,p as f,f as j,J as k,o as h,I as b,Q as x}from"./index.24326e78.js";const _={class:"juejin"},O={key:0,class:"logo"},I={key:1,class:"loading"},F={key:2,class:"error"},T={key:3,class:"list"},$={class:"title"},z=["href"],A={class:"like"};var L=s(l({props:{componentSetting:{type:Object,required:!0}},setup(t){const e=t,n=c(),o=r((()=>n.state.isLock)),i=p([]),s=p(!1),l=p(!1),L=async()=>{try{s.value=!0,l.value=!1;const t=await fetch(`${x}/api/juejinList?limit=${e.componentSetting.limit||10}`),{list:n}=await t.json();i.value=n.map((t=>({id:t.article_id,title:t.title,like:t.digg_count,view:t.view_count})))}catch(t){l.value=!0,console.error(t)}finally{s.value=!1}};let P;function C(){L(),P&&window.clearInterval(P),P=window.setInterval((()=>{L()}),60*e.componentSetting.duration*1e3)}d((()=>C())),u((()=>window.clearInterval(P))),m((()=>[e.componentSetting.duration,e.componentSetting.limit]),(()=>C()));const J=r((()=>k(e.componentSetting.position))),q=()=>{1===e.componentSetting.clickActionType?C():2===e.componentSetting.clickActionType&&window.open("https://juejin.cn/")};return(e,n)=>(h(),g("div",{class:"wrapper",style:y(a({fontSize:t.componentSetting.textFontSize+"px",color:t.componentSetting.textColor,textShadow:t.componentSetting.textShadow,padding:t.componentSetting.padding+"px",fontFamily:t.componentSetting.fontFamily},j(J)))},[v("div",_,[!1!==t.componentSetting.showTitle?(h(),g("div",O,[v("img",{src:"https://sf3-scmcdn2-tos.pstatp.com/xitu_juejin_web/img/logo.a7995ad.svg",style:y({filter:`drop-shadow(${t.componentSetting.iconShadow})`,cursor:t.componentSetting.clickActionType?"pointer":"default"}),alt:"Juejin",onClick:q},null,4)])):w("",!0),s.value?(h(),g("div",I,"Loading...")):l.value?(h(),g("div",F,"Something error!")):(h(),g("div",T,[(h(!0),g(S,null,f(i.value,(t=>(h(),g("div",{class:"list-item",key:t.id},[v("div",$,[v("a",{href:`https://juejin.cn/post/${t.id}`,target:"_blank",style:y(j(o)?"":"pointer-events: none")},b(t.title),13,z)]),v("div",A,"👍"+b(t.like),1)])))),128))]))])],4))}}),[["__scopeId","data-v-3560c0cb"]]);export{L as default};
