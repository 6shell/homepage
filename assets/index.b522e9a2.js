import{u as e}from"./index.335d7c87.js";import{e as t,w as a,f as n,a8 as o,a9 as i,p as l,h as s,o as d,j as c,s as r,t as h,F as u,k as m,u as v,C as p,A as k,M as g,m as S,aa as C,n as y}from"./element-plus.d6b83795.js";o.extend(i);var D={name:"DatePicker",props:{date:String,todo:{type:Object,required:!0}},emit:["selectDate"],setup(e,{emit:i}){const l=t("");a((()=>e.date),(e=>{l.value=o(e).format("YYYY-MM")}),{immediate:!0});return{weekStrArr:["S","M","T","W","T","F","S"],dayList:n((()=>{const e=o().month(o(l.value).month()).startOf("month");let t=o().week(o(e).week()).startOf("week");const a=[];for(let n=0;n<35;n++){const e=~~t.format("DD"),n=t.format("YYYY-MM-DD"),o=~~t.format("MM");a.push({label:e,value:n,month:o}),t=t.add(1,"d")}return a})),selectedMonth:n((()=>~~o(l.value).format("MM"))),labelMonth:n((()=>o(l.value).format("MMM, YYYY"))),hasTodoListDates:n((()=>Object.keys(e.todo))),handleClickDay:e=>i("selectDate",e),handlePrevClick:()=>{l.value=o(l.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{l.value=o(l.value).add(1,"month").format("YYYY-MM")}}}};const w=v();l("data-v-6500bce0");const f={class:"date-picker"},M={class:"calendar__date"},b=r("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[r("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1),Y={class:"calendar__head content"},x=r("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[r("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1);s();const _=w(((e,t,a,n,o,i)=>(d(),c("div",f,[r("div",M,[r("div",{class:"calendar__head prev",onClick:t[1]||(t[1]=(...e)=>n.handlePrevClick&&n.handlePrevClick(...e))},[b]),r("div",Y,h(n.labelMonth),1),r("div",{class:"calendar__head next",onClick:t[2]||(t[2]=(...e)=>n.handleNextClick&&n.handleNextClick(...e))},[x]),(d(!0),c(u,null,m(n.weekStrArr,((e,t)=>(d(),c("div",{class:"calendar__day",key:e+t},h(e),1)))),128)),(d(!0),c(u,null,m(n.dayList,(e=>(d(),c("div",{class:["calendar__number",{"not-this-month":e.month!==n.selectedMonth,active:e.value===a.date,tips:n.hasTodoListDates.includes(e.value)}],key:e.value,onClick:t=>n.handleClickDay(e)},h(e.label),11,["onClick"])))),128))])]))));D.render=_,D.__scopeId="data-v-6500bce0";const O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Firday","Saturday"];var L={name:"TodoList",components:{DatePicker:D},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0}},setup(a){const i=e(),l=n((()=>function(e,t){let a=!1;"#"===e[0]&&(e=e.slice(1),a=!0);const n=parseInt(e,16);let o=(n>>16)+t;o>255?o=255:o<0&&(o=0);let i=(n>>8&255)+t;i>255?i=255:i<0&&(i=0);let l=(255&n)+t;return l>255?l=255:l<0&&(l=0),(a?"#":"")+(l|i<<8|o<<16).toString(16)}(a.componentSetting.themeColor||"#643a7a",50))),s=t();p((()=>{s.value=o().format("YYYY-MM-DD")}));const d=t(""),c=t(!1),r=n((()=>a.componentSetting.todo[s.value]||[]));return{weekDay:n((()=>O[new Date(s.value).getDay()])),formatterDate:n((()=>{const e=new Date(s.value).toDateString().split(" ");return`${e[1]} ${e[2]}, ${e[3]}`})),todoList:r,handleChecked:e=>{const t=!r.value[e].isChecked,n=JSON.parse(JSON.stringify(a.element));n.componentSetting.todo[s.value][e].isChecked=t,i.commit("editComponent",n)},handleRemove:e=>{const t=JSON.parse(JSON.stringify(a.element));t.componentSetting.todo[s.value].splice(e,1),i.commit("editComponent",t)},handleAdd:()=>{d.value="";const e=JSON.parse(JSON.stringify(a.element)),t={content:"",isChecked:!1,isEditing:!0};e.componentSetting.todo[s.value]?e.componentSetting.todo[s.value].push(t):e.componentSetting.todo[s.value]=[t],i.commit("editComponent",e)},handleEditSubmit:(e,t,n)=>{if(t.isEditing){const t=JSON.parse(JSON.stringify(a.element)),o=t.componentSetting.todo[s.value];e.currentTarget.value?(o[n].content=d.value=e.currentTarget.value,o[n].isEditing=!1):o.splice(n,1),i.commit("editComponent",t)}},editingValue:d,showDatePicker:c,date:s,updateDate:e=>{s.value=e.value},themeLightColor:l}}};const P=v();l("data-v-3c95c844");const N={class:"head"},T={class:"list"},z={class:"wrapper"},E=r("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1),F=r("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1),J=r("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[r("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"})],-1);s();const j=P(((e,t,a,n,o,i)=>{const l=k("DatePicker"),s=g("focus");return d(),c("div",{class:"todo-list-card",style:{"--themeColor":a.componentSetting.themeColor,"--themeLightColor":n.themeLightColor,fontSize:a.componentSetting.baseFontSize+"px",padding:a.componentSetting.padding+"px"}},[r("div",N,[r("div",{class:"title",onClick:t[1]||(t[1]=e=>n.showDatePicker=!n.showDatePicker)},h(n.weekDay),1),r("div",{class:"subtitle",onClick:t[2]||(t[2]=e=>n.showDatePicker=!n.showDatePicker)},h(n.formatterDate),1),r("div",{class:["picker",{active:n.showDatePicker}]},[r(l,{date:n.date,todo:a.componentSetting.todo,onSelectDate:n.updateDate},null,8,["date","todo","onSelectDate"])],2)]),r("ul",T,[(d(!0),c(u,null,m(n.todoList,((e,t)=>(d(),c("li",{class:"list-item",key:e.content+t},[r("input",{type:"checkbox",name:"todo",checked:e.isChecked},null,8,["checked"]),e.isEditing?S((d(),c("input",{key:1,type:"text",class:"edit",value:n.editingValue,onBlur:a=>n.handleEditSubmit(a,e,t),onKeyup:C((a=>n.handleEditSubmit(a,e,t)),["enter"])},null,40,["value","onBlur","onKeyup"])),[[s]]):(d(),c("div",{key:0,class:"text",onClick:e=>n.handleChecked(t)},h(e.content),9,["onClick"])),S(r("div",{class:"button",onClick:e=>n.handleChecked(t)},null,8,["onClick"]),[[y,!e.isChecked]]),S(r("div",z,[(d(),c("svg",{viewBox:"0 0 98.5 98.5",width:20*a.componentSetting.baseFontSize/16,height:20*a.componentSetting.baseFontSize/16},[E],8,["width","height"]))],512),[[y,e.isChecked]]),r("div",{class:"close",onClick:e=>n.handleRemove(t)},[(d(),c("svg",{viewBox:"0 0 1024 1024",width:20*a.componentSetting.baseFontSize/16,height:20*a.componentSetting.baseFontSize/16},[F],8,["width","height"]))],8,["onClick"])])))),128))]),r("div",{class:"add",onClick:t[3]||(t[3]=(...e)=>n.handleAdd&&n.handleAdd(...e))},[J])],4)}));L.render=j,L.__scopeId="data-v-3c95c844";export default L;
