import{a}from"./index.27683ae0.js";import{d as e,b as l,z as s,e as t,E as r,L as i,t as n,D as o,F as c,h as u,u as p,j as v,p as d,l as m}from"./element-plus.abf3c969.js";d("data-v-0c5237fe");const h={key:0,class:"wrapper"},g={class:"box"},y=i("div",{class:"title-wrapper clear"},[i("span",{class:"title fl"},"必应壁纸")],-1),f={key:0,class:"text"},k={key:1,class:"text"},b={key:2,class:"bing item-wrapper"},w=["onClick"],x={class:"img-wrapper"},C=["src"],j={class:"box"},z={class:"title-wrapper clear"},E=i("span",{class:"title fl"},"Unsplash",-1),$={key:0,class:"date fr"},_={key:0,class:"text"},L={key:1,class:"text"},A={key:2,class:"unsplash item-wrapper"},I=["onClick"],S={class:"img-wrapper"},B=["src"];m();var D=e({emits:["submit"],setup(e,{emit:d}){const m=l(!1),D=l(),H=l([]),O=l(!1),U=l(!1),W=l([]),F=l(""),M=l(!1),N=l(!1),P=()=>{D.value.open(),m.value||(m.value=!0),(N.value||0===W.value.length)&&(async()=>{try{M.value=!0,N.value=!1;const e=await fetch(`${a}/photos`),{errCode:l,data:s}=await e.json();if(200!==l)throw new Error("Api server error");W.value=s.list,F.value=s.date}catch(e){N.value=!0,console.error(e)}finally{M.value=!1}})(),(U.value||0===H.value.length)&&(async()=>{try{O.value=!0,U.value=!1;const e=encodeURIComponent("https://cn.bing.com/HPImageArchive.aspx?format=js&idx=0&n=8&mkt=zh-CN"),l=await fetch(`${a}/api/transfer?target=${e}&noHeaders=1`,{headers:{"content-type":"application/json; charset=utf-8"}}),{images:s}=await l.json();if(!(s&&s.length>0))throw new Error("Api server error");H.value=s.map((a=>({url:`https://cn.bing.com/${a.url}`,thumb:`https://cn.bing.com/${a.urlbase}_320x240.jpg&rf=LaDigue_1920x1080.jpg&pid=hp`})))}catch(e){U.value=!0,console.error(e)}finally{O.value=!1}})()},R=()=>{},T=a=>{d("submit",a),D.value.close()};return(a,e)=>{const l=s("animation-dialog");return t(),r(c,null,[i("button",{type:"button",class:"btn btn-small btn-primary",style:{margin:"0","margin-right":"5px"},onClick:P},"今日壁纸推荐"),n(l,{ref:(a,e)=>{e.dialog=a,D.value=a},animationMode:"",customWrapperClass:"backdrop-blur",title:"今日壁纸推荐",width:"min(760px, 94vw)",height:"min(480px, 80vh)",appendToBody:"",closeOnClickOutside:!1,listenWindowSizeChange:!0,onBeforeClose:R},{default:o((()=>[m.value?(t(),r("div",h,[i("div",g,[y,O.value?(t(),r("div",f,"Loading...")):U.value?(t(),r("div",k,"Something Error...")):(t(),r("div",b,[(t(!0),r(c,null,u(H.value,(a=>(t(),r("div",{class:"item",key:a.url,onClick:e=>T(a.url)},[i("div",x,[a.url?(t(),r("img",{key:0,src:a.thumb,loading:"lazy"},null,8,C)):v("",!0)])],8,w)))),128)),(t(),r(c,null,u(4,(a=>i("div",{class:"item-fake",key:a}))),64))]))]),i("div",j,[i("div",z,[E,F.value?(t(),r("span",$,p(F.value),1)):v("",!0)]),M.value?(t(),r("div",_,"Loading...")):N.value?(t(),r("div",L,"Something Error...")):(t(),r("div",A,[(t(!0),r(c,null,u(W.value,(a=>(t(),r("div",{class:"item",key:a.id,onClick:e=>T(a.urls.raw)},[i("div",S,[a.urls.thumb?(t(),r("img",{key:0,src:a.urls.thumb,loading:"lazy"},null,8,B)):v("",!0)])],8,I)))),128)),(t(),r(c,null,u(4,(a=>i("div",{class:"item-fake",key:a}))),64))]))])])):v("",!0)])),_:1},512)],64)}}});D.__scopeId="data-v-0c5237fe";export default D;
