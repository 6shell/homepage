import{aB as e,C as t,x as a,D as n,M as o,a1 as i,a6 as l,U as s,H as c,I as d,ac as r,a2 as u,A as h,B as m,z as p,Z as v,X as k,ad as g,S as f,Q as S,aC as C,R as D,O as y}from"./element-plus.bd20adc7.js";import{_ as w,u as M}from"./index.6697fabb.js";import{d as b}from"./dayjs.min.96aafdab.js";import{l as Y,g as x}from"./color.556e4bcb.js";var O,_,A={exports:{}},B=A.exports=(O="week",_="year",function(e,t,a){var n=t.prototype;n.week=function(e){if(void 0===e&&(e=null),null!==e)return this.add(7*(e-this.week()),"day");var t=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var n=a(this).startOf(_).add(1,_).date(t),o=a(this).endOf(O);if(n.isBefore(o))return 1}var i=a(this).startOf(_).date(t).startOf(O).subtract(1,"millisecond"),l=this.diff(i,O,!0);return l<0?a(this).startOf("week").week():Math.ceil(l)},n.weeks=function(e){return void 0===e&&(e=null),this.week(e)}});b.extend(B);const E={name:"DatePicker",props:{date:String,todo:{type:Object,required:!0},isDark:{type:Boolean,default:!1}},emit:["selectDate"],setup(e,{emit:o}){const i=t("");a((()=>e.date),(e=>{i.value=b(e).format("YYYY-MM")}),{immediate:!0});return{weekStrArr:["S","M","T","W","T","F","S"],dayList:n((()=>{const e=b().month(b(i.value).month()).startOf("month");let t=b().week(b(e).week()).startOf("week");const a=[];for(let n=0;n<35;n++){const e=~~t.format("DD"),n=t.format("YYYY-MM-DD"),o=~~t.format("MM");a.push({label:e,value:n,month:o}),t=t.add(1,"d")}return a})),selectedMonth:n((()=>~~b(i.value).format("MM"))),labelMonth:n((()=>b(i.value).format("MMM, YYYY"))),hasTodoListDates:n((()=>Object.keys(e.todo))),handleClickDay:e=>o("selectDate",e),handlePrevClick:()=>{i.value=b(i.value).subtract(1,"month").format("YYYY-MM")},handleNextClick:()=>{i.value=b(i.value).add(1,"month").format("YYYY-MM")}}}},L=e=>(h("data-v-644ae154"),e=e(),m(),e),P={class:"calendar__date"},N=[L((()=>l("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[l("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)))],T={class:"calendar__head content"},j=[L((()=>l("svg",{viewBox:"0 0 1024 1024",width:"20",height:"20"},[l("path",{d:"M754.739998 129.124869 677.034219 62.024635 266.002818 515.097548 672.169421 958.024379 749.894643 890.904703 408.017252 515.097548Z"})],-1)))],z=["onClick"];const J=["Sunday","Monday","Tuesday","Wednesday","Thursday","Firday","Saturday"],V=p({name:"TodoList",components:{DatePicker:w(E,[["render",function(e,t,a,n,h,m){return o(),i("div",{class:"date-picker",style:u({"--themeTextColor1":a.isDark?"#fff":"#464646","--themeTextColor2":a.isDark?"#464646":"#fff"})},[l("div",P,[l("div",{class:"calendar__head prev",onClick:t[0]||(t[0]=(...e)=>n.handlePrevClick&&n.handlePrevClick(...e))},N),l("div",T,s(n.labelMonth),1),l("div",{class:"calendar__head next",onClick:t[1]||(t[1]=(...e)=>n.handleNextClick&&n.handleNextClick(...e))},j),(o(!0),i(c,null,d(n.weekStrArr,((e,t)=>(o(),i("div",{class:"calendar__day",key:e+t},s(e),1)))),128)),(o(!0),i(c,null,d(n.dayList,(e=>(o(),i("div",{class:r(["calendar__number",{"not-this-month":e.month!==n.selectedMonth,active:e.value===a.date,tips:n.hasTodoListDates.includes(e.value)}]),key:e.value,onClick:t=>n.handleClickDay(e)},s(e.label),11,z)))),128))])],4)}],["__scopeId","data-v-644ae154"]])},directives:{focus(e){document.activeElement!==e&&e.focus()}},props:{componentSetting:{type:Object,required:!0},element:{type:Object,required:!0},isAction:{type:Boolean,default:!1}},setup(e){const a=M(),o=n((()=>Y(e.componentSetting.themeColor||"#643a7a",50))),i=n((()=>x(e.componentSetting.themeColor||"#643a7a")<150)),l=t();v((()=>{l.value=b().format("YYYY-MM-DD")}));const s=t(""),c=t(!1),d=n((()=>e.componentSetting.todo[l.value]||[]));return{weekDay:n((()=>J[new Date(l.value).getDay()])),formatterDate:n((()=>{const e=new Date(l.value).toDateString().split(" ");return`${e[1]} ${e[2]}, ${e[3]}`})),todoList:d,handleChecked:t=>{const n=!d.value[t].isChecked,o=JSON.parse(JSON.stringify(e.element));e.isAction?(o.actionSetting.actionClickValue.componentSetting.todo[l.value][t].isChecked=n,a.commit("updateActionElement",o)):o.componentSetting.todo[l.value][t].isChecked=n,a.commit("editComponent",o)},handleRemove:t=>{const n=JSON.parse(JSON.stringify(e.element));e.isAction?(n.actionSetting.actionClickValue.componentSetting.todo[l.value].splice(t,1),a.commit("updateActionElement",n)):n.componentSetting.todo[l.value].splice(t,1),a.commit("editComponent",n)},handleAdd:()=>{s.value="";const t=JSON.parse(JSON.stringify(e.element)),n={content:"",isChecked:!1,isEditing:!0};e.isAction?(t.actionSetting.actionClickValue.componentSetting.todo[l.value]?t.actionSetting.actionClickValue.componentSetting.todo[l.value].push(n):t.actionSetting.actionClickValue.componentSetting.todo[l.value]=[n],a.commit("updateActionElement",t)):t.componentSetting.todo[l.value]?t.componentSetting.todo[l.value].push(n):t.componentSetting.todo[l.value]=[n],a.commit("editComponent",t)},handleEditSubmit:(t,n,o)=>{if(n.isEditing){const n=JSON.parse(JSON.stringify(e.element)),i=e.isAction?n.actionSetting.actionClickValue.componentSetting.todo[l.value]:n.componentSetting.todo[l.value];t.currentTarget.value?(i[o].content=s.value=t.currentTarget.value,i[o].isEditing=!1):i.splice(o,1),e.isAction&&a.commit("updateActionElement",n),a.commit("editComponent",n)}},editingValue:s,showDatePicker:c,date:l,updateDate:e=>{l.value=e.value},themeLightColor:o,isDark:i}}}),F=e=>(h("data-v-4c0c4730"),e=e(),m(),e),$={class:"head"},q={class:"list"},I=["checked"],R=["onClick"],Z=["value","onBlur","onKeyup"],K=["onClick"],W={class:"wrapper"},H=["width","height"],Q=[F((()=>l("path",{class:"checkmark",fill:"none","stroke-width":"8","stroke-miterlimit":"10",d:"M81.7,17.8C73.5,9.3,62,4,49.2,4C24.3,4,4,24.3,4,49.2s20.3,45.2,45.2,45.2s45.2-20.3,45.2-45.2c0-8.6-2.4-16.6-6.5-23.4l0,0L45.6,68.2L24.7,47.3"},null,-1)))],U=["onClick"],X=["width","height"],G=[F((()=>l("path",{d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,-1)))],ee={viewBox:"0 0 1024 1024",width:"20",height:"20"},te=["fill"];var ae=w(V,[["render",function(e,t,a,n,h,m){const p=k("DatePicker"),v=g("focus");return o(),i("div",{class:"todo-list-card",style:u({"--themeColor":e.componentSetting.themeColor,"--themeLightColor":e.themeLightColor,fontSize:e.componentSetting.baseFontSize+"px",padding:e.componentSetting.padding+"px"})},[l("div",$,[l("div",{class:"title",onClick:t[0]||(t[0]=t=>e.showDatePicker=!e.showDatePicker)},s(e.weekDay),1),l("div",{class:"subtitle",onClick:t[1]||(t[1]=t=>e.showDatePicker=!e.showDatePicker)},s(e.formatterDate),1),l("div",{class:r(["picker",{active:e.showDatePicker}])},[f(p,{date:e.date,todo:e.componentSetting.todo,onSelectDate:e.updateDate,isDark:e.isDark},null,8,["date","todo","onSelectDate","isDark"])],2)]),l("ul",q,[(o(!0),i(c,null,d(e.todoList,((t,a)=>(o(),i("li",{class:"list-item",key:t.content+a},[l("input",{type:"checkbox",name:"todo",checked:t.isChecked},null,8,I),t.isEditing?S((o(),i("input",{key:1,type:"text",class:"edit",value:e.editingValue,onBlur:n=>e.handleEditSubmit(n,t,a),onKeyup:C((n=>e.handleEditSubmit(n,t,a)),["enter"])},null,40,Z)),[[v]]):(o(),i("div",{key:0,class:"text",onClick:t=>e.handleChecked(a)},s(t.content),9,R)),S(l("div",{class:"button",onClick:t=>e.handleChecked(a)},null,8,K),[[D,!t.isChecked]]),S(l("div",W,[(o(),i("svg",{viewBox:"0 0 98.5 98.5",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},Q,8,H))],512),[[D,t.isChecked]]),l("div",{class:"close",onClick:y((t=>e.handleRemove(a)),["stop"])},[(o(),i("svg",{viewBox:"0 0 1024 1024",width:20*e.componentSetting.baseFontSize/16,height:20*e.componentSetting.baseFontSize/16},G,8,X))],8,U)])))),128))]),l("div",{class:"add",onClick:t[2]||(t[2]=(...t)=>e.handleAdd&&e.handleAdd(...t))},[(o(),i("svg",ee,[l("path",{fill:e.isDark?"#fff":"#464646",d:"M510.8096 420.3008l335.296-335.296 90.5088 90.5088-335.296 335.296 335.296 335.296-90.5088 90.5088-335.296-335.296-335.296 335.296-90.5088-90.5088 335.296-335.296-335.296-335.296 90.5088-90.5088z"},null,8,te)]))])],4)}],["__scopeId","data-v-4c0c4730"]]);export{ae as default};
